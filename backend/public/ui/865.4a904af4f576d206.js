"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[865],{4865:(zo,ge,S)=>{S.r(ge),S.d(ge,{AppProjectsRoutingModule:()=>Ro});var be=S(5487),O=S(6814),Z=S(4284),ne=S(1272),we=S(1141),qe=S(4135),e=S(5879);let ve=(()=>{class a extends qe.wc{constructor(){super()}getSpaceDesignCanvas(t,o=1e3){const n=document.createElement("canvas");n.width=1e3,n.height=1e3;const i=n.getContext("2d");if(i){const{max_x:r,max_y:c,min_x:l,min_y:s}=this.calculateSpaceDesign_Max_Min_X_Y(t.walls,t.doors),h=(o-200)/Math.max(1,Math.max(Math.abs(r-l),Math.abs(c-s))),v=Math.abs(r-l)*h+200,T=Math.abs(c-s)*h+200;i.canvas.width=o,i.canvas.height=T;const w=100+(o-v)/2+(l<0?-1*l*h:0),x=125+(s<0?-1*s*h:0);this.drawSpaceBorders(i,t,t.walls,w,x,h,r,c,l,s),this.drawSpaceBordersCenter(i,t.walls,w,x,h,r,c,l,s),this.drawSpaceDoors(i,t.walls,t.doors,w,x,h),this.drawSpaceWindows(i,t.walls,t.windows,w,x,h),this.drawSpaceNumbersDelimitations(i,t,t.walls,t.doors,t.windows,t.modules,w,x,h,r,c,l,s),this.drawSpaceLetters(i,t,t.walls,w,x,h,r,c,l,s)}return i?n:null}calculateSpaceDesign_Max_Min_X_Y(t,o){let n=Number.MIN_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,l=0,s=0,u=-1*(180-(t.length>0?t[0].wall_angle:0));return t.forEach((h,v)=>{const T=Number.parseFloat(""+h.wall_width);u+=180-h.wall_angle;const p=l,g=s,b=v===t.length-1?0:p+T*Math.cos(u*Math.PI/180),f=v===t.length-1?0:g+T*Math.sin(u*Math.PI/180);l=b,s=f,n=Math.max(n,l),i=Math.max(i,s),r=Math.min(r,l),c=Math.min(c,s),T>0&&o.forEach((w,x)=>{if(h.wall_identifier===w.door_wall_identifier&&w.door_opening_direction.startsWith("OUT")){const I=Number.parseFloat(""+w.door_left_width),F=Number.parseFloat(""+w.door_width),y=p+(b-p)*I/T,J=g+(f-g)*I/T,j=p+(b-p)*(I+F)/T,A=g+(f-g)*(I+F)/T,C=Math.abs(y-j),E=Math.abs(J-A);n=Math.max(n,y+E,j+E),i=Math.max(i,J+C,A+C),r=Math.min(r,y-E,j-E),c=Math.min(c,J-C,A-C)}})}),{max_x:n,max_y:i,min_x:r,min_y:c}}drawSpaceBorders(t,o,n,i,r,c,l,s,u,h){t.save(),t.strokeStyle="#000000",t.fillStyle="#FFFFFF",t.beginPath();let v=i,T=r,p=i,g=r,b=i,f=r;t.moveTo(v+0,T+0);let w=-1*(180-(n.length>0?n[0].wall_angle:0));n.forEach((x,I)=>{const y=Number.parseFloat(""+x.wall_width)*c;w+=180-x.wall_angle,v+=y*Math.cos(w*Math.PI/180),T+=y*Math.sin(w*Math.PI/180),v<p&&(p=v),T<g&&(g=T),v>b&&(b=v),T>f&&(f=T),t.lineTo(v,T)}),t.closePath(),t.fill(),t.stroke(),t.restore()}drawSpaceBordersCenter(t,o,n,i,r,c,l,s,u){t.save();let h=n,v=i,T=0,p=0,g=-1*(180-(o.length>0?o[0].wall_angle:0));o.forEach((b,f)=>{T+=h,p+=v;const x=Number.parseFloat(""+b.wall_width)*r;g+=180-b.wall_angle,h+=x*Math.cos(g*Math.PI/180),v+=x*Math.sin(g*Math.PI/180)}),T=o.length>2?T/o.length:0,p=o.length>2?p/o.length:0,t.restore()}drawSpaceDoors(t,o,n,i,r,c){t.save();let l=i,s=r;t.moveTo(l+0,s+0);let u=-1*(180-(o.length>0?o[0].wall_angle:0));o.forEach((h,v)=>{const p=Number.parseFloat(""+h.wall_width)*c;u+=180-h.wall_angle;const g=l,b=s;l+=p*Math.cos(u*Math.PI/180),s+=p*Math.sin(u*Math.PI/180);const f=l,w=s;n.forEach((x,I)=>{if(h.wall_identifier===x.door_wall_identifier){const y=Number.parseFloat(""+x.door_left_width)*c,j=Number.parseFloat(""+x.door_width)*c,A=g+(f-g)*y/p,C=b+(w-b)*y/p,E=g+(f-g)*(y+j)/p,N=b+(w-b)*(y+j)/p;t.beginPath(),t.strokeStyle="#b1b7c1",t.fillStyle="#b1b7c1",t.lineWidth=4,t.setLineDash([8,3]),x.door_opening_direction.startsWith("IN_")&&x.door_opening_direction.endsWith("_LEFT")?(t.moveTo(E,N),t.arc(E,N,j,(0+u+90)*Math.PI/180,(0+u+180)*Math.PI/180,!1)):x.door_opening_direction.startsWith("IN_")&&x.door_opening_direction.endsWith("_RIGHT")?(t.moveTo(A,C),t.arc(A,C,j,(0+u+90)*Math.PI/180,(0+u+0)*Math.PI/180,!0)):x.door_opening_direction.startsWith("OUT_")&&x.door_opening_direction.endsWith("_LEFT")?(t.moveTo(E,N),t.arc(E,N,j,(0+u-90)*Math.PI/180,(0+u-180)*Math.PI/180,!0)):x.door_opening_direction.startsWith("OUT_")&&x.door_opening_direction.endsWith("_RIGHT")&&(t.moveTo(A,C),t.arc(A,C,j,(0+u-90)*Math.PI/180,(0+u-0)*Math.PI/180,!1)),t.stroke(),t.setLineDash([]),t.closePath(),t.beginPath(),t.strokeStyle="#0a108f",t.fillStyle="#0a108f",t.moveTo(A,C),t.arc(A,C,4,0,360*Math.PI/180),t.fill(),t.moveTo(E,N),t.arc(E,N,4,0,360*Math.PI/180),t.fill(),t.closePath(),t.beginPath(),t.strokeStyle="#0a108f",t.fillStyle="#0a108f",t.lineWidth=6,t.setLineDash([]),t.moveTo(A,C),t.lineTo(E,N),t.stroke(),t.setLineDash([]),t.closePath()}})}),t.restore()}drawSpaceWindows(t,o,n,i,r,c){t.save();let l=i,s=r;t.moveTo(l+0,s+0);let u=-1*(180-(o.length>0?o[0].wall_angle:0));o.forEach((h,v)=>{const p=Number.parseFloat(""+h.wall_width)*c;u+=180-h.wall_angle;const g=l,b=s;l+=p*Math.cos(u*Math.PI/180),s+=p*Math.sin(u*Math.PI/180);const f=l,w=s;n.forEach((x,I)=>{if(h.wall_identifier===x.window_wall_identifier){const y=Number.parseFloat(""+x.window_left_width)*c,j=Number.parseFloat(""+x.window_width)*c,A=g+(f-g)*y/p,C=b+(w-b)*y/p,E=g+(f-g)*(y+j)/p,N=b+(w-b)*(y+j)/p;t.beginPath(),t.strokeStyle="#0a108f",t.fillStyle="#0a108f",t.moveTo(A,C),t.arc(A,C,4,0,360*Math.PI/180),t.fill(),t.moveTo(E,N),t.arc(E,N,4,0,360*Math.PI/180),t.fill(),t.closePath(),t.beginPath(),t.strokeStyle="#0a108f",t.fillStyle="#0a108f",t.lineWidth=6,t.moveTo(A,C),t.lineTo(E,N),t.stroke(),t.closePath()}})}),t.restore()}drawSpaceNumbersDelimitations(t,o,n,i,r,c,l,s,u,h,v,T,p){t.save();let g=l,b=s,f=l,w=s,x=l,I=s,F=-1*(180-(n.length>0?n[0].wall_angle:0));n.forEach((y,J)=>{const A=Number.parseFloat(""+y.wall_width)*u;F+=180-y.wall_angle,g+=A*Math.cos(F*Math.PI/180),b+=A*Math.sin(F*Math.PI/180),g<f&&(f=g),b<w&&(w=b),g>x&&(x=g),b>I&&(I=b)}),g=l,b=s,F=-1*(180-(n.length>0?n[0].wall_angle:0)),n.forEach((y,J)=>{const A=Number.parseFloat(""+y.wall_width)*u,C=g,E=b;F+=180-y.wall_angle,g+=A*Math.cos(F*Math.PI/180),b+=A*Math.sin(F*Math.PI/180);const N=g,M=b,V=i.filter(L=>L.door_wall_identifier===y.wall_identifier),B=r.filter(L=>L.window_wall_identifier===y.wall_identifier);if(c.filter(L=>L.module_wall_identifier===y.wall_identifier),V.length+B.length>0){const L=[];V.forEach(P=>{L.push({left:Number.parseFloat(P.door_left_width),height:0}),L.push({left:Number.parseFloat(P.door_left_width)+Number.parseFloat(P.door_width),height:0})}),B.forEach(P=>{L.push({left:Number.parseFloat(P.window_left_width),height:Number.parseFloat(P.window_under_height)}),L.push({left:Number.parseFloat(P.window_left_width)+Number.parseFloat(P.window_width),height:Number.parseFloat(P.window_under_height)})}),L.sort(function(P,z){return P.left>z.left?1:P.left<z.left?-1:0}),L.forEach((P,z)=>{const Y=Number.parseFloat(0===z?0:L[z-1].left),U=Number.parseFloat(L[z].left);if(t.font="bold 20px serif",t.strokeStyle="#74777d",t.fillStyle="#74777d",U-Y!=0){const Q=C+(Y+U)/2*(N-C)/y.wall_width,R=E+(Y+U)/2*(M-E)/y.wall_width,K=C!==N?(E-M)/(C-N):null;null===K||Math.abs(K)>=1?t.fillText(""+(U-Y),Q<=(f+x)/2?Q+10:Q-50,R+5):null!==K&&Math.abs(K)<=1&&t.fillText(""+(U-Y),Q-15,R<(w+I)/2?R+20:R-10)}if(z===L.length-1){const Q=Number.parseFloat(y.wall_width);if(Q-U!=0){const R=C+(Q+U)/2*(N-C)/y.wall_width,K=E+(Q+U)/2*(M-E)/y.wall_width,ue=C!==N?(E-M)/(C-N):null;null===ue||Math.abs(ue)>=1?t.fillText(""+(Q-U),R<=(f+x)/2?R+10:R-50,K+5):null!==ue&&Math.abs(ue)<=1&&t.fillText(""+(Q-U),R-15,K<(w+I)/2?K+20:K-10)}}t.closePath()})}}),t.restore()}drawSpaceLetters(t,o,n,i,r,c,l,s,u,h){t.save();let v=i,T=r,p=i,g=r,b=i,f=r,w=-1*(180-(n.length>0?n[0].wall_angle:0));n.forEach((x,I)=>{const y=Number.parseFloat(""+x.wall_width)*c;w+=180-x.wall_angle,v+=y*Math.cos(w*Math.PI/180),T+=y*Math.sin(w*Math.PI/180),v<p&&(p=v),T<g&&(g=T),v>b&&(b=v),T>f&&(f=T)}),t.beginPath(),t.font="bold 30px serif",t.strokeStyle="#000000",t.fillStyle="#000000",t.fillText((o.space_floor_area/1e6).toFixed(2)+" m^2",(b+p)/2-50,r-60),t.stroke(),t.closePath(),v=i,T=r,w=-1*(180-(n.length>0?n[0].wall_angle:0)),n.forEach((x,I)=>{const y=Number.parseFloat(""+x.wall_width)*c,J=(x.wall_identifier+"-").split("-")[0].trim();let j=v,A=T;j<(b+p)/2?j-=10:j>(b+p)/2&&(j-=8),A<(f+g)/2?A-=10:A>(f+g)/2&&(A+=30),w+=180-x.wall_angle,v+=y*Math.cos(w*Math.PI/180),T+=y*Math.sin(w*Math.PI/180),t.beginPath(),t.font="bold 28px serif",t.strokeStyle="#000000",t.fillStyle="#000000",t.fillText(J,j,A),t.stroke(),t.closePath()}),v=i,T=r,w=-1*(180-(n.length>0?n[0].wall_angle:0)),n.forEach((x,I)=>{const F=Number.parseFloat(""+x.wall_width),y=F*c,J=""+F,j=v,A=T;w+=180-x.wall_angle,v+=y*Math.cos(w*Math.PI/180),T+=y*Math.sin(w*Math.PI/180);const C=v,E=T,N=j!==C?(A-E)/(j-C):null;t.beginPath(),t.font="bold 24px serif",t.strokeStyle="#ff0000",t.fillStyle="#ff0000",null===N||Math.abs(N)>=1?t.fillText(J,(j+C)/2<=(p+b)/2?(j+C)/2-70:(j+C)/2+20,(A+E)/2+5):null!==N&&Math.abs(N)<=1&&t.fillText(J,(j+C)/2-30,(A+E)/2<(g+f)/2?(A+E)/2-25:(A+E)/2+40),t.stroke(),t.closePath()}),t.restore()}getWallDesignCanvas(t,o,n=1e3){const i=document.createElement("canvas");i.width=1e3,i.height=1e3;const r=i.getContext("2d");if(r){const l=(n-200)/Math.max(1,this.calculateWallDesign_Max_Min_Wall_Width(t.walls)),s=Math.abs(o.wall_width)*l+200,u=Math.abs(o.wall_height)*l+200;r.canvas.width=n,r.canvas.height=u;const h=100+(n-s)/2,v=125;this.drawWallBorders(r,o,h,v,l),this.drawWallDoors(r,o,t.doors,h,v,l),this.drawWallWindows(r,o,t.windows,h,v,l),this.drawWallModules(r,o,t.modules,h,v,l),this.drawWallNumbersDelimitations(r,o,t.doors,t.windows,t.modules,h,v,l),this.drawWallLetters(r,o,h,v,l)}return r?i:null}calculateWallDesign_Max_Min_Wall_Width(t){let o=Number.MIN_SAFE_INTEGER;return t.forEach(n=>{o=Math.max(o,Math.max(n.wall_width,n.wall_height))}),o}drawWallBorders(t,o,n,i,r){t.save(),t.strokeStyle="#000000",t.fillStyle="#FFFFFF",t.beginPath();let c=n,l=i;t.moveTo(c+0,l+0),c+=o.wall_width*r,l+=0,t.lineTo(c,l),c+=0,l+=o.wall_height*r,t.lineTo(c,l),c-=o.wall_width*r,l+=0,t.lineTo(c,l),c+=0,l-=o.wall_height*r,t.lineTo(c,l),t.closePath(),t.fill(),t.stroke(),t.restore()}drawWallDoors(t,o,n,i,r,c){t.save(),n.filter(l=>l.door_wall_identifier===o.wall_identifier).forEach(l=>{let s=i,u=r;t.strokeStyle="#0a108f",t.fillStyle="#FFFFFF",t.beginPath(),t.lineWidth=4,t.moveTo(s+0,u+0),s+=0,u+=o.wall_height*c,s+=l.door_left_width*c,u+=0,t.moveTo(s+0,u+0),s+=0,u-=l.door_height*c,t.lineTo(s,u),s+=l.door_width*c,u+=0,t.lineTo(s,u),s+=0,u+=l.door_height*c,t.lineTo(s,u),s-=l.door_width*c,u+=0,t.closePath(),t.fill(),t.stroke(),t.strokeStyle="#0a108f",t.fillStyle="#0a108f",t.beginPath(),t.lineWidth=2,("IN_LEFT"===l.door_opening_direction||"OUT_LEFT"===l.door_opening_direction)&&(s+=20,u=u-l.door_height*c/2+20,t.moveTo(s+0,u+0),t.arc(s,u,5,0,360*Math.PI/180),t.fill()),("IN_RIGHT"===l.door_opening_direction||"OUT_RIGHT"===l.door_opening_direction)&&(s=s-20+l.door_width*c,u=u-l.door_height*c/2+20,t.moveTo(s+0,u+0),t.arc(s,u,5,0,360*Math.PI/180),t.fill()),t.closePath(),t.stroke()}),t.restore()}drawWallWindows(t,o,n,i,r,c){t.save(),n.filter(l=>l.window_wall_identifier===o.wall_identifier).forEach(l=>{let s=i,u=r;t.strokeStyle="#0a108f",t.fillStyle="#FFFFFF",t.beginPath(),t.lineWidth=3,t.moveTo(s+0,u+0),s+=0,u+=o.wall_height*c,s+=l.window_left_width*c,u-=l.window_under_height*c,t.moveTo(s+0,u+0),s+=0,u-=l.window_height*c,t.lineTo(s,u),s+=l.window_width*c,u+=0,t.lineTo(s,u),s+=0,u+=l.window_height*c,t.lineTo(s,u),s-=l.window_width*c,u+=0,t.lineTo(s,u),t.closePath(),t.fill(),t.stroke(),t.strokeStyle="#b1b7c1",t.fillStyle="#b1b7c1",t.setLineDash([8,5]),t.beginPath(),t.lineWidth=1,t.moveTo(s+l.window_width/2*c,u+0),t.lineTo(s+l.window_width/2*c,u+0-l.window_height*c),t.moveTo(s+0,u+0-l.window_height/2*c),t.lineTo(s+l.window_width*c,u+0-l.window_height/2*c),t.closePath(),t.stroke(),t.setLineDash([])}),t.restore()}drawWallModules(t,o,n,i,r,c){t.save(),n.filter(l=>l.module_wall_identifier===o.wall_identifier).forEach(l=>{let s=i,u=r;const T=l.mechanisms&&l.mechanisms.length>0?90*l.mechanisms.length:90;!0===l.module_make_new_installation?(t.strokeStyle="#ff0000",t.fillStyle="#FFFFFF"):(t.strokeStyle="#0a108f",t.fillStyle="#FFFFFF"),t.beginPath(),t.lineWidth=3,t.moveTo(s+0,u+0),s+=0,u+=o.wall_height*c,s+=l.module_wall_identifier.startsWith(l.module_reference_point)?l.module_distance_to_reference_point*c:o.wall_width*c-l.module_distance_to_reference_point*c-T*c,u-=l.module_bottom_height*c,t.moveTo(s+0,u+0),t.lineTo(s,u-90*c),s+=0,u-=90*c,t.lineTo(s+T*c,u),s+=T*c,u+=0,t.lineTo(s,u+90*c),s+=0,u+=90*c,t.lineTo(s-T*c,u),s-=T*c,u+=0,t.closePath(),t.fill(),t.stroke(),l.mechanisms.forEach((b,f)=>{f<l.mechanisms.length-1&&(!0===l.module_make_new_installation?(t.strokeStyle="#ff0000",t.fillStyle="#FFFFFF"):(t.strokeStyle="#0a108f",t.fillStyle="#FFFFFF"),t.beginPath(),t.lineWidth=3,t.moveTo(s+90*(f+1)*c,u+0),t.lineTo(s+90*(f+1)*c,u-90*c),t.closePath(),t.fill(),t.stroke())}),s=i,u=r,t.beginPath(),t.strokeStyle="#ff0000",t.fillStyle="#ff0000",t.lineWidth=2,t.moveTo(s+0,u+0),s+=0,u+=o.wall_height*c,s+=l.module_wall_identifier.startsWith(l.module_reference_point)?l.module_distance_to_reference_point*c:o.wall_width*c-l.module_distance_to_reference_point*c-T*c,u-=l.module_bottom_height*c,s+=(l.module_wall_identifier.startsWith(l.module_reference_point)?0:T)*c,u-=90*c,t.moveTo(s+0,u+0);for(let b=0;b<l.module_trenches_count;b++){const f=30*c,w=l.module_wall_identifier.startsWith(l.module_reference_point)?b*f:-b*f;t.moveTo(s+0+w,u+0);const x=s+0+w,I=Math.max(r,r);t.lineTo(x,I)}t.closePath(),t.stroke()}),t.restore()}drawWallNumbersDelimitations(t,o,n,i,r,c,l,s){const u=n.filter(p=>p.door_wall_identifier===o.wall_identifier),h=i.filter(p=>p.window_wall_identifier===o.wall_identifier),v=r.filter(p=>p.module_wall_identifier===o.wall_identifier);if(u.length+h.length+v.length===0)return;const T=[];u.forEach(p=>{T.push({pos_x:Number.parseFloat(p.door_left_width),pos_y:0}),T.push({pos_x:Number.parseFloat(p.door_left_width)+Number.parseFloat(p.door_width),pos_y:0,is_door:!0,width:p.door_width,height:p.door_height})}),h.forEach(p=>{T.push({pos_x:Number.parseFloat(p.window_left_width),pos_y:Number.parseFloat(p.window_under_height)}),T.push({pos_x:Number.parseFloat(p.window_left_width)+Number.parseFloat(p.window_width),pos_y:Number.parseFloat(p.window_under_height),is_window:!0,width:p.window_width,height:p.window_height})}),v.forEach(p=>{T.push({pos_x:p.module_wall_identifier.startsWith(p.module_reference_point)?Number.parseFloat(p.module_distance_to_reference_point):Number.parseFloat(o.wall_width)-Number.parseFloat(p.module_distance_to_reference_point),pos_y:Number.parseFloat(p.module_bottom_height),is_module:!0,width:0,height:Number.parseFloat(o.wall_width)-Number.parseFloat(p.module_bottom_height)-90,reference:p.module_wall_identifier.startsWith(p.module_reference_point)?"LEFT":"RIGHT",trench_count:p.module_trenches_count})}),T.sort(function(p,g){return p.pos_x>g.pos_x?1:p.pos_x<g.pos_x?-1:0}),T.forEach((p,g)=>{t.beginPath(),t.strokeStyle="#b1b7c1",t.fillStyle="#b1b7c1",t.lineWidth=1,t.setLineDash([8,5]),t.moveTo(c+p.pos_x*s,l+o.wall_height*s),t.lineTo(c+p.pos_x*s,l+o.wall_height*s-p.pos_y*s),t.stroke(),t.setLineDash([]),t.closePath(),t.beginPath();const b=Number.parseFloat(0===g?0:T[g-1].pos_x),f=Number.parseFloat(T[g].pos_x);if(t.font="bold 20px serif",t.strokeStyle="#74777d",t.fillStyle="#74777d",p.is_door?(t.fillText(""+p.width,c+(f-Number.parseFloat(p.width)/2)*s-20,l+o.wall_height*s-10),t.fillText(""+p.height,c+(f-Number.parseFloat(p.width))*s+10,l+o.wall_height*s-p.height/2*s-10)):p.is_window?(t.fillText(""+p.width,c+(f-Number.parseFloat(p.width)/2)*s-20,l+o.wall_height*s-10),t.fillText(""+p.width,c+(f-Number.parseFloat(p.width)/2)*s-20,l+o.wall_height*s-Number.parseFloat(p.pos_y)*s-10),t.fillText(""+p.height,c+(f-Number.parseFloat(p.width))*s+10,l+o.wall_height*s-Number.parseFloat(p.pos_y)*s-p.height/2*s+5),t.fillText(""+p.pos_y,c+(f-Number.parseFloat(p.width))*s+10,l+o.wall_height*s-Number.parseFloat(p.pos_y)/2*s+5)):p.is_module?(t.fillText(""+(f-b),c+(b+f)/2*s-20,l+o.wall_height*s-10),"LEFT"===p.reference?t.fillText(""+p.height,c+f*s+30*(p.trench_count-1)*s+5,l+o.wall_height*s-Number.parseFloat(p.pos_y)*s-p.height/2*s-5):"RIGHT"===p.reference&&t.fillText(""+p.height,c+f*s-30*(p.trench_count-1)*s-45,l+o.wall_height*s-Number.parseFloat(p.pos_y)*s-p.height/2*s-5),"LEFT"===p.reference?t.fillText(""+p.pos_y,c+f*s+5,l+o.wall_height*s-Number.parseFloat(p.pos_y)/2*s-5):"RIGHT"===p.reference&&t.fillText(""+p.pos_y,c+f*s-40,l+o.wall_height*s-Number.parseFloat(p.pos_y)/2*s-5)):f-b!=0&&t.fillText(""+(f-b),c+(b+f)/2*s-20,l+o.wall_height*s-10),g===T.length-1){const w=Number.parseFloat(o.wall_width);w-f!=0&&t.fillText(""+(w-f),c+(w+f)/2*s-20,l+o.wall_height*s-10)}t.closePath()})}drawWallLetters(t,o,n,i,r){let c=n,l=i;c=n,l=i,t.beginPath(),t.font="bold 30px serif",t.strokeStyle="#000000",t.fillStyle="#000000",t.moveTo(c+0,l+0),c+=o.wall_width*r/2,t.fillText((o.wall_area/1e6).toFixed(2)+" m^2",c-50,i-70),t.stroke(),t.closePath(),c=n,l=i,t.beginPath(),t.font="bold 28px serif",t.strokeStyle="#000000",t.fillStyle="#000000";const s=o.wall_identifier.split("-")[0].trim(),u=o.wall_identifier.split("-")[1].trim();t.moveTo(c+0,l+0),c+=o.wall_width*r,l+=0,t.moveTo(c+0,l+0),c+=0,l+=o.wall_height*r,t.fillText(u,c-10,l+30),t.moveTo(c+0,l+0),c-=o.wall_width*r,l+=0,t.fillText(s,c-10,l+30),t.moveTo(c+0,l+0),c+=0,l-=o.wall_height*r,t.closePath(),c=n,l=i,t.beginPath(),t.font="bold 24px serif",t.strokeStyle="#ff0000",t.fillStyle="#ff0000";const h=""+o.wall_width,v=""+o.wall_height;t.fillText(h,c-30+o.wall_width*r/2,l-15),t.moveTo(c+0,l+0),c+=o.wall_width*r,l+=0,t.fillText(v,c+15,l+o.wall_height*r/2),t.moveTo(c+0,l+0),c+=0,l+=o.wall_height*r,t.fillText(h,c-30-o.wall_width*r/2,l+35),t.moveTo(c+0,l+0),c-=o.wall_width*r,l+=0,t.fillText(v,c-70,l-o.wall_height*r/2),t.moveTo(c+0,l+0),c+=0,l-=o.wall_height*r,t.closePath()}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac})}return a})();var m=S(6290),xe=S(5403),ce=S(7170),W=S(701),ie=S(2874),pe=S(2178),se=S(6306),$=S(2096),ee=S(4664),_e=S(9315),H=S(7398),ke=S(4036),G=S(8180),Te=S(878);let me=(()=>{class a extends ie.O0{constructor(){super(),this.__isDevMode=(0,e.X6Q)(),this.store=(0,e.f3M)(xe.yh),this.translate=(0,e.f3M)(pe.D7),this.projectsService=(0,e.f3M)(ce.m9),this.fileUploader=(0,e.f3M)(ce.$v),this.canvasUtil=(0,e.f3M)(ve)}reset(){this.store.dispatch(new W.qV({}))}dispatchClearListData(){return this.store.dispatch(new W.Le(W.Ok.getListDataDefaultValue()))}dispatchSetListData(t){return this.store.dispatch(new W.Le(t))}executeListItemsRequest(t){return this.projectsService.itemsIndex({},null,t.page+1,t.pageSize,t.sorts&&t.sorts[0]?t.sorts[0]?.prop:null,t.sorts&&t.sorts[0]?t.sorts[0]?.dir:null).pipe((0,se.K)(this.handleError))}createListDataFromListResponse(t,o){return(0,$.of)(t).pipe((0,ee.w)(n=>{const i=[];return n.data.forEach((r,c)=>{i.push(this.createItemDataFromSaveResponseData(r))}),0===i.length?(0,$.of)([]):(0,_e.D)(i)}),(0,H.U)(n=>[...n]),(0,H.U)(n=>({page:t.meta.current_page-1,pageSize:t.meta.per_page,total:t.meta.total,filters:o.filters,sorts:o.sorts,items:[...n],selected:[]})))}setItemToEdit(t,o){return(0,ke.z)(this.store.dispatch(new W.a5(t&&o?t:null,t&&o?o:null)))}getBodyDataForSaveItem(t,o){return(0,$.of)(o).pipe((0,ee.w)(n=>this.uploadProjectImagesDesigns(n)),(0,H.U)(n=>{const i={...n,reference:n.reference,description:n.description,client_data:this.utilEncodeData(n.client),client_data_version:this.getCurrentEncodeDecodeVersion(),address_data:this.utilEncodeData(n.address),address_data_version:this.getCurrentEncodeDecodeVersion(),spaces_data:this.utilEncodeData(n.spaces),spaces_data_version:this.getCurrentEncodeDecodeVersion(),space_count:n.spaces.length};return delete i.client,delete i.address,delete i.spaces,delete i.$$__designs_gallery_updated,i}))}executeSaveItemRequest(t,o,n){return t?this.projectsService.itemsUpdate(t,n).pipe((0,se.K)(this.handleError)):this.projectsService.itemsStore(n).pipe((0,se.K)(this.handleError))}createItemDataFromSaveResponseData(t){this.logger.console.debug(this.__classname,"createItemDataFromSaveResponseData",t);const o=t.thumbnails?t.thumbnails:null,n={...t,thumbnailUrl:o&&(o.startsWith("https://")||o.startsWith("http://"))?o:"./assets/img/application/projects/project-type-"+t.id%7+".png",client:this.utilDecodeData(t.client_data,t.client_data_version),address:this.utilDecodeData(t.address_data,t.address_data_version),spaces:this.utilDecodeData(t.spaces_data,t.spaces_data_version)};return delete n.client_data,delete n.client_data_version,delete n.address_data,delete n.address_data_version,delete n.spaces_data,delete n.spaces_data_version,this.logger.console.debug(this.__classname,"newItemData",n),(0,$.of)(n)}getBodyDataForRemoveItem(t,o){return(0,$.of)({id:t})}executeRemoveItemRequest(t,o,n){return this.projectsService.itemsDelete(t).pipe((0,se.K)(this.handleError))}createItemDataFromRemoveResponseData(t){return(0,$.of)({result:t.data?t.data:t,deleted:t.data&&"success"===t.data["alert-type"],message:t?.data?.message?t?.data?.message:t})}openAndDownloadBudgetPdf(t,o,n=!1){const i=(0,Te.Z)().replace(/-/g,"").toLowerCase(),r=this.translate.translate.instant((0,m.J)("app.projects.feature.list.pdf.title"))+(" ["+o.reference+"]-"+i+".pdf").replaceAll(" ","-").toLowerCase();return this.projectsService.budgetPdf(t).pipe((0,se.K)(this.handleError),(0,H.U)(c=>{if(null===c)return!1;const l=c;if(window.navigator?.msSaveOrOpenBlob)window.navigator?.msSaveOrOpenBlob(l,r);else{const s=URL.createObjectURL(l);if(!n){const u=window.open(void 0,"_blank");u&&(u.location.href=s,u.document.title=r)}if(n){const u=document.createElement("a");u.href=s,u.download=r,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(s)}}return!0}))}getUrlForBudgetPdf(t,o){const n=(0,Te.Z)().replace(/-/g,"").toLowerCase();return this.translate.translate.instant((0,m.J)("app.projects.feature.list.pdf.title")),(" ["+o.reference+"]-"+n+".pdf").replaceAll(" ","-").toLowerCase(),this.projectsService.budgetPdf(t).pipe((0,se.K)(this.handleError),(0,H.U)(r=>null!==r&&URL.createObjectURL(r)))}calculateAreaFromSpaceData(t){const o=t.walls;let n=0,i=0,r=0,c=0,l=-1*(180-(o.wall_length>0?o[0].wall_angle:0));o.forEach((p,g)=>{r+=n,c+=i;const b=Number.parseFloat(""+p.wall_width);l+=180-p.wall_angle,n+=b*Math.cos(l*Math.PI/180),i+=b*Math.sin(l*Math.PI/180)}),r=o.wall_length>2?r/o.wall_length:0,c=o.wall_length>2?c/o.wall_length:0;let s=0;n=0,i=0,l=-1*(180-(o.wall_length>0?o[0].wall_angle:0));const u=[],h=[];o.forEach((p,g)=>{const b=Number.parseFloat(""+p.wall_width);l+=180-p.wall_angle,u.push(n),h.push(i),n+=b*Math.cos(l*Math.PI/180),i+=b*Math.sin(l*Math.PI/180)});let v=0,T=0;return u.forEach((p,g)=>{v+=u[g%u.length]*h[(g+1)%u.length],T+=h[g%u.length]*u[(g+1)%u.length]}),s=Math.abs(v-T)/2,s}updateProjectImagesDesigns(t,o){return t.$$__designs_gallery_updated=!1,(0,$.of)(t).pipe((0,ee.w)(n=>{const i=[];return i.push((0,$.of)(n)),n.spaces.map((r,c,l)=>{const s=o&&o.spaces&&o.spaces[c]?o.spaces[c]:null;return r.designs_gallery=s?s.designs_gallery:[],r.doors.forEach((u,h)=>{u.designs_gallery=s&&s.doors&&s.doors[h]?s.doors[h].designs_gallery:[]}),r.walls.forEach((u,h)=>{u.designs_gallery=s&&s.walls&&s.walls[h]?s.walls[h].designs_gallery:[]}),r.windows.forEach((u,h)=>{u.designs_gallery=s&&s.windows&&s.windows[h]?s.windows[h].designs_gallery:[]}),r.modules.forEach((u,h)=>{u.designs_gallery=s&&s.modules&&s.modules[h]?s.modules[h].designs_gallery:[]}),r}).filter((r,c,l)=>{const s=JSON.parse(JSON.stringify(r)),u=JSON.parse(JSON.stringify(o&&o.spaces&&o.spaces[c]?o.spaces[c]:null));return(u?[s,u]:[s]).forEach(h=>{h.designs_gallery=[],h?.doors?.forEach(v=>{h.designs_gallery=[],h.door_photos_gallery=[]}),h?.walls?.forEach(v=>{h.designs_gallery=[],h.wall_photos_gallery=[]}),h?.windows?.forEach(v=>{v.designs_gallery=[],v.window_photos_gallery=[]}),h?.modules?.forEach(v=>{v.designs_gallery=[],v.module_photos_gallery=[]})}),this.__isDevMode||JSON.stringify(s)!==JSON.stringify(u)}).forEach((r,c,l)=>{i.push(this.updateSpaceImagesDesigns(r))}),(0,_e.D)(i)}),(0,H.U)(([n,...i])=>(n.$$__designs_gallery_updated=!0,n)))}uploadProjectImagesDesigns(t){return(0,$.of)(t).pipe((0,ee.w)(o=>{const n=[];return n.push((0,$.of)(o)),o.spaces.forEach(i=>{i.designs_gallery.forEach(r=>{r.saved||n.push(this.fileUploader.upload(r.url,r.format).pipe((0,G.q)(1),(0,H.U)(c=>{r.url=c.file,r.saved=!0})))}),i.walls.forEach((r,c)=>{r.designs_gallery.forEach((l,s)=>{l.saved||n.push(this.fileUploader.upload(l.url,l.format).pipe((0,G.q)(1),(0,H.U)(u=>{l.url=u.file,l.saved=!0})))})}),i.doors.forEach(r=>{r.door_photos_gallery.forEach(c=>{c.saved||n.push(this.fileUploader.upload(c.url,c.format).pipe((0,G.q)(1),(0,H.U)(l=>{c.url=l.file,c.saved=!0})))})}),i.windows.forEach((r,c)=>{r.window_photos_gallery.forEach((l,s)=>{l.saved||n.push(this.fileUploader.upload(l.url,l.format).pipe((0,G.q)(1),(0,H.U)(u=>{l.url=u.file,l.saved=!0})))})})}),(0,_e.D)(n)}),(0,H.U)(([o,...n])=>o))}updateSpaceImagesDesigns(t){return(0,$.of)(t).pipe((0,ee.w)(o=>{const n=this.canvasUtil.getSpaceDesignCanvas(o);if(n){const i=n.toDataURL("image/png");o.designs_gallery=[{url:i,saved:!1,format:"image/png"}]}return(0,$.of)(o)}),(0,ee.w)(o=>{const n=[];return n.push((0,$.of)(o)),o.walls.forEach(i=>{n.push(this.updateWallImagesDesigns(o,i))}),(0,_e.D)(n)}),(0,H.U)(([o,...n])=>o))}updateWallImagesDesigns(t,o){return(0,$.of)(t).pipe((0,ee.w)(n=>{const i=this.canvasUtil.getWallDesignCanvas(n,o);if(i){const r=i.toDataURL("image/png");o.designs_gallery=[{url:r,saved:!1,format:"image/png"}]}return(0,$.of)(o)}))}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac})}return a})(),Le=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=e.oAB({type:a});static#o=this.\u0275inj=e.cJS({providers:[me,ve],imports:[O.ez]})}return a})();var Oe=S(6223),Pe=S(332),k=S(930),te=S(9515);let ye=(()=>{class a{constructor(){this.currency=(0,e.f3M)(O.H9)}transform(t,...o){return this.currency.transform(t,"EUR","symbol-narrow","1.2-2")}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275pipe=e.Yjl({name:"budget",type:a,pure:!0})}return a})(),Ce=(()=>{class a{constructor(){this.date=(0,e.f3M)(O.uU)}transform(t,...o){return this.date.transform(t,"dd/MM/yyyy")}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275pipe=e.Yjl({name:"createdAt",type:a,pure:!0})}return a})(),Ae=(()=>{class a{constructor(){}transform(t,...o){return'<img src="'+t+'" class="lozad" loading="lazy" width="45px" alt="Project" title="Project"/>'}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275pipe=e.Yjl({name:"thumbnail",type:a,pure:!0})}return a})(),Fe=(()=>{class a{constructor(){this.date=(0,e.f3M)(O.uU)}transform(t,...o){return this.date.transform(t,"dd/MM/yyyy")}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275pipe=e.Yjl({name:"updatedAt",type:a,pure:!0})}return a})(),Se=(()=>{class a extends k.Ot{constructor(){super()}getDefaultDataSettings(){return{...super.getDefaultDataSettings(),rowIdentity:o=>o.id,displayCheck:(o,n,i)=>o.id>0,selectCheck:(o,n,i)=>o.id>0,sorts:[{prop:"created_at",dir:"desc"}]}}getDefaultColumnsSettings(){const t={...super.getDefaultColumnsSettings()};return t.columns.push(...k.Pw.hasMobileSize()?[{name:(0,m.J)("app.projects.ui.table.title.actions"),nameTranslation:!0,prop:"actions",width:120,resizeable:!1,sortable:!1,draggable:!1,canAutoResize:!1}]:[],{name:"",prop:"thumbnailUrl",width:70,resizeable:!1,sortable:!1,draggable:!1,canAutoResize:!1,pipe:(0,e.f3M)(Ae)},{name:(0,m.J)("app.projects.ui.table.title.reference"),nameTranslation:!0,prop:"reference",width:100,resizeable:!0,sortable:!0,draggable:!1,canAutoResize:!0},{name:(0,m.J)("app.projects.ui.table.title.space_count"),nameTranslation:!0,prop:"space_count",width:100,resizeable:!1,sortable:!0,draggable:!1,canAutoResize:!1},{name:(0,m.J)("app.projects.ui.table.title.budget"),nameTranslation:!0,prop:"budget",width:100,resizeable:!1,sortable:!0,draggable:!1,canAutoResize:!1,pipe:(0,e.f3M)(ye)},{name:(0,m.J)("app.projects.ui.table.title.created_at"),nameTranslation:!0,prop:"created_at",width:100,resizeable:!1,sortable:!0,draggable:!1,canAutoResize:!1,pipe:(0,e.f3M)(Ce)},{name:(0,m.J)("app.projects.ui.table.title.created_by"),nameTranslation:!0,prop:"created_by_name",width:100,resizeable:!1,sortable:!0,draggable:!1,canAutoResize:!1},{name:(0,m.J)("app.projects.ui.table.title.updated_at"),nameTranslation:!0,prop:"updated_at",width:100,resizeable:!1,sortable:!0,draggable:!1,canAutoResize:!1,pipe:(0,e.f3M)(Fe)},...k.Pw.hasMobileSize()?[]:[{name:(0,m.J)("app.projects.ui.table.title.actions"),nameTranslation:!0,prop:"actions",width:220,resizeable:!1,sortable:!1,draggable:!1,canAutoResize:!1}]),t}getDefaultViewSettings(){return{...super.getDefaultViewSettings(),tableClasses:"striped bordered",wrapperStyles:{"min-width":"800px"},rowClass:o=>({}),toggleRowDetailByWindowSize:!1,groupRowsHeaderHeight:55,footerPagingPageSizeOptions:[5,10,15,20,50]}}getDefaultExtraSettings(){return{...super.getDefaultExtraSettings()}}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac})}return a})();var je=S(6593);let $e=(()=>{class a{constructor(){this.sanitizer=(0,e.f3M)(je.H7)}transform(t,...o){return this.sanitizer.bypassSecurityTrustHtml(t.street+" ("+t.city_code+", "+t.state_code+")")}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275pipe=e.Yjl({name:"address",type:a,pure:!0})}return a})(),Ve=(()=>{class a{constructor(){}transform(t,...o){let n="";return[1,2,3,4,5].forEach(i=>{n+='<i class="fa fa-star'+(i<=t?"":"-o")+'" title="'+i+'"></i>&nbsp;'}),n}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275pipe=e.Yjl({name:"rating",type:a,pure:!0})}return a})(),Ue=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=e.oAB({type:a});static#o=this.\u0275inj=e.cJS({providers:[Se,$e,ye,Ce,Fe,Ve,Ae,O.uU,te.X$,O.H9],imports:[O.ez,we.f,k.gi,k.Xl,Pe.A0,Oe.u5,Z.dTQ,ne.QX,Z.hJ1]})}return a})(),Ge=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=e.oAB({type:a});static#o=this.\u0275inj=e.cJS({imports:[O.ez,we.f,Le,Ue,Z.dTQ,Z.P4_,Z.dGk,ne.QX,Z.hJ1]})}return a})();var le=S(7582),Be=S(8662),Qe=S(5592),X=S(1004);function He(a,_){if(1&a&&(e.ynx(0),e.TgZ(1,"tr")(2,"th",10),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"th"),e._uU(6),e.ALo(7,"async"),e.ALo(8,"optionItemLabel"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA()(),e.BQk()),2&a){const t=_.$implicit,o=_.index;e.xp6(3),e.AsE(" ",e.lcZ(4,7,"app.projects.ui.table.title.space")," # ",o+1," "),e.xp6(3),e.hij(" ",e.lcZ(7,9,e.xi3(8,11,t.space_type_id,"spaces_types"))," "),e.xp6(4),e.Oqu(t.walls.length),e.xp6(2),e.Oqu(t.doors.length),e.xp6(2),e.Oqu(t.windows.length),e.xp6(2),e.Oqu(t.modules.length)}}function Re(a,_){if(1&a&&(e.ynx(0),e.TgZ(1,"c-card",11)(2,"c-card-header")(3,"label")(4,"b"),e._uU(5),e.ALo(6,"translate"),e.ALo(7,"async"),e.ALo(8,"optionItemLabel"),e.qZA()()(),e.TgZ(9,"c-card-body")(10,"div",5)(11,"div",12),e._UZ(12,"techpromux-ui-photos-gallery",13),e.qZA(),e._UZ(13,"div",14),e.TgZ(14,"div",15),e._UZ(15,"techpromux-ui-photos-gallery",13),e.qZA()()()(),e.BQk()),2&a){const t=_.$implicit,o=_.index,n=e.oxw();e.xp6(5),e.lnq(" ",e.lcZ(6,27,"app.projects.ui.table.title.space")," # ",o+1," - ",e.lcZ(7,29,e.xi3(8,31,t.space_type_id,"spaces_types"))," "),e.xp6(7),e.Q6J("editable",!1)("header","")("imageStoreBasePath",n.imageStoreBasePath)("photos",t.designs_gallery)("container_class","")("img_width","100%")("img_height","100%")("img_container_width_editable","100%")("img_container_width_no_editable","100%")("img_container_height_editable","")("img_container_height_no_editable","")("img_container_class","text-center position-relative m-auto pt-0 mt-0 mb-3 me-3"),e.xp6(3),e.Q6J("editable",!1)("header","")("imageStoreBasePath",n.imageStoreBasePath)("photos",n.getSpaceWallsDesignsGalleries(t))("container_class","")("img_width","100%")("img_height","100%")("img_container_width_editable","45%")("img_container_width_no_editable","45%")("img_container_height_editable","")("img_container_height_no_editable","")("img_container_class","position-relative float-start text-center m-auto pt-0 mt-0 mb-2 ms-2")}}let he=(()=>{class a extends ie.e1{constructor(){super(),this.fileUploader=(0,e.f3M)(ce.$v),this.imageStoreBasePath=this.fileUploader.getImageStoreBasePath(),this.project={}}ngOnInit(){super.ngOnInit()}hasMobileSize(){return k.Pw.hasMobileSize()}getSpaceWallsDesignsGalleries(t){const o=[];return t.walls.forEach(n=>{o.push(...n.designs_gallery)}),o}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-projects-ui-project-detail"]],inputs:{project:"project"},features:[e.qOj],decls:53,vars:46,consts:[[1,"container-fluid"],[1,"",2,"width","100%","border","1px solid #0f0f0f"],[2,"white-space","break-spaces"],[2,"font-weight","600",3,"innerHTML"],[3,"innerText"],[1,"row"],[1,"col-md-12","col-sm-12","col-xs-12"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"mb-3",2,"max-width","calc(100vw - 80px)"],[1,"col-xl-6","col-lg-6","col-md-6","col-sm-12","col-xs-12","ps-3","pe-3",2,"max-width","calc(100vw - 60px)"],[3,"editable","header","imageStoreBasePath","photos","container_class","img_width","img_height","img_container_width_editable","img_container_width_no_editable","img_container_height_editable","img_container_height_no_editable","img_container_class"],[1,"col-xs-12","d-xs-block","d-sm-block","d-md-none"],[1,"col-xl-6","col-lg-6","col-md-6","col-sm-12","col-xs-12",2,"max-width","calc(100vw - 60px)"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"hr",1),e.TgZ(2,"p",2),e._UZ(3,"label",3),e.ALo(4,"translate"),e._UZ(5,"span",4),e._uU(6," | "),e._UZ(7,"label",3),e.ALo(8,"translate"),e._UZ(9,"span",4),e.qZA(),e._UZ(10,"hr",1),e.TgZ(11,"p",2),e._UZ(12,"label",3),e.ALo(13,"translate"),e._UZ(14,"span",4),e.ALo(15,"async"),e.ALo(16,"optionItemLabel"),e.ALo(17,"async"),e.ALo(18,"optionItemLabel"),e.qZA(),e._UZ(19,"hr",1),e.TgZ(20,"p",2),e._UZ(21,"label",3),e.ALo(22,"translate"),e._UZ(23,"span",4),e.qZA(),e._UZ(24,"hr",1),e.TgZ(25,"div",5)(26,"div",6)(27,"table",7)(28,"thead")(29,"tr")(30,"th",8),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"th",8),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"th",8),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"th",8),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"th",8),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"th",8),e._uU(46),e.ALo(47,"translate"),e.qZA()()(),e.TgZ(48,"tbody"),e.YNc(49,He,17,14,"ng-container",9),e.qZA()()(),e.TgZ(50,"div",6),e.YNc(51,Re,16,34,"ng-container",9),e.qZA()(),e._UZ(52,"hr",1),e.qZA()),2&o&&(e.xp6(3),e.Q6J("innerHTML",e.lcZ(4,16,"app.projects.ui.table.client")+": ",e.oJD),e.xp6(2),e.Q6J("innerText",n.project.client.first_name+" "+n.project.client.last_name),e.xp6(2),e.Q6J("innerHTML",e.lcZ(8,18,"app.projects.ui.table.nif")+": ",e.oJD),e.xp6(2),e.Q6J("innerText",n.project.client.nif),e.xp6(3),e.Q6J("innerHTML",e.lcZ(13,20,"app.projects.ui.table.address")+": ",e.oJD),e.xp6(2),e.Q6J("innerText",n.project.address.street+(n.project.address.additional&&""!==n.project.address.additional?", "+n.project.address.additional:"")+(n.project.address.city_code&&""!==n.project.address.city_code?". "+e.lcZ(15,22,e.xi3(16,24,n.project.address.city_code,"geo_infos_cities__"+n.project.address.state_code)):"")+(n.project.address.state_code&&""!==n.project.address.state_code?(n.project.address.city_code&&""!==n.project.address.city_code?", ":". ")+e.lcZ(17,27,e.xi3(18,29,n.project.address.state_code,"geo_infos_states")):"")+(n.project.address.postal_code&&""!==n.project.address.postal_code?". CP "+n.project.address.postal_code:"")),e.xp6(7),e.Q6J("innerHTML",e.lcZ(22,32,"app.projects.ui.table.description")+": ",e.oJD),e.xp6(2),e.Q6J("innerText",n.project.description),e.xp6(8),e.hij(" ",e.lcZ(32,34,"app.projects.ui.table.title.space")," "),e.xp6(3),e.hij(" ",e.lcZ(35,36,"app.projects.ui.table.title.space_type")," "),e.xp6(3),e.hij(" ",e.lcZ(38,38,"app.projects.ui.table.title.walls")," "),e.xp6(3),e.hij(" ",e.lcZ(41,40,"app.projects.ui.table.title.doors")," "),e.xp6(3),e.hij(" ",e.lcZ(44,42,"app.projects.ui.table.title.windows")," "),e.xp6(3),e.hij(" ",e.lcZ(47,44,"app.projects.ui.table.title.modules")," "),e.xp6(3),e.Q6J("ngForOf",n.project.spaces),e.xp6(2),e.Q6J("ngForOf",n.project.spaces))},dependencies:[O.sg,Z.AkF,Z.yue,Z.nkx,k.ef,O.Ov,te.X$,k.wO],changeDetection:0})}return a})();const ze=["rowsGroupHeaderTpl"],Ye=["rowDetailsTpl"],Ke=["fieldActionsTpl"];function We(a,_){1&a&&e._UZ(0,"app-projects-ui-project-detail",4),2&a&&e.Q6J("project",_.row)}function Xe(a,_){if(1&a){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().row;e.oxw();const i=e.MAs(2);return e.KtG(i.toggleExpandRow(n))}),e.ALo(1,"translate"),e.O4$(),e._UZ(2,"svg",14),e.qZA()}2&a&&e.MGl("title"," ",e.lcZ(1,1,"app.projects.ui.table.btn.detail"),"")}function et(a,_){if(1&a){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().row;e.oxw();const i=e.MAs(2);return e.KtG(i.toggleExpandRow(n))}),e.ALo(1,"translate"),e.O4$(),e._UZ(2,"svg",16),e.qZA()}2&a&&(e.MGl("title"," ",e.lcZ(1,2,"app.projects.ui.table.btn.detail"),""),e.Q6J("active",!0))}function tt(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){const i=e.CHM(t).row,r=e.oxw();return e.KtG(r.onClickBtn_Edit(i))}),e.ALo(1,"translate"),e.O4$(),e._UZ(2,"svg",6),e.qZA(),e.kcU(),e.TgZ(3,"button",7),e.NdJ("click",function(){const i=e.CHM(t).row,r=e.oxw();return e.KtG(r.onClickBtn_Delete(i))}),e.ALo(4,"translate"),e.O4$(),e._UZ(5,"svg",8),e.qZA(),e.YNc(6,Xe,3,3,"button",9),e.YNc(7,et,3,4,"button",10),e.kcU(),e.TgZ(8,"button",11),e.NdJ("click",function(){const i=e.CHM(t).row,r=e.oxw();return e.KtG(r.onClickBtn_Doc(i))}),e.ALo(9,"translate"),e.O4$(),e._UZ(10,"svg",12),e.qZA()}if(2&a){const t=_.expanded,o=e.oxw();e.ekj("mb-2",o.hasMobileSize()),e.MGl("title"," ",e.lcZ(1,9,"app.projects.ui.table.btn.edit"),""),e.xp6(3),e.ekj("mb-2",o.hasMobileSize()),e.MGl("title"," ",e.lcZ(4,11,"app.projects.ui.table.btn.delete"),""),e.xp6(3),e.Q6J("ngIf",!t),e.xp6(1),e.Q6J("ngIf",t),e.xp6(1),e.MGl("title"," ",e.lcZ(9,13,"app.projects.ui.table.btn.download"),"")}}let ot=(()=>{class a extends ie.e1{constructor(){super(),this.paged=new e.vpe,this.sorted=new e.vpe,this.selected=new e.vpe,this.clickEdit=new e.vpe,this.clickDelete=new e.vpe,this.clickDoc=new e.vpe,this.listTableSettingsHandler=(0,e.f3M)(Se),this.listTableSettingsHandler.init()}ngOnInit(){super.ngOnInit(),this.listTableSettingsHandler.viewSettings.groupRowsHeaderTemplate=this.rowsGroupHeaderTpl,this.listTableSettingsHandler.viewSettings.rowDetailsTemplate=this.rowDetailsTpl,this.listTableSettingsHandler.columnsSettings?.columns?.map(t=>("actions"===t.prop&&this.fieldActionsTpl&&(t.cellTemplate=this.fieldActionsTpl),t))}onPaged(t){this.paged.emit(t)}onSorted(t){this.sorted.emit(t)}onSelected(t){this.selected.emit(t)}hasMobileSize(){return k.Pw.hasMobileSize()}onClickBtn_Edit(t){this.clickEdit.emit(t)}onClickBtn_Delete(t){this.clickDelete.emit(t)}onClickBtn_Doc(t){this.clickDoc.emit(t)}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-projects-ui-projects-table"]],viewQuery:function(o,n){if(1&o&&(e.Gf(ze,7,e.Rgc),e.Gf(Ye,7,e.Rgc),e.Gf(Ke,7,e.Rgc)),2&o){let i;e.iGM(i=e.CRH())&&(n.rowsGroupHeaderTpl=i.first),e.iGM(i=e.CRH())&&(n.rowDetailsTpl=i.first),e.iGM(i=e.CRH())&&(n.fieldActionsTpl=i.first)}},inputs:{pagedDataSettings:"pagedDataSettings"},outputs:{paged:"paged",sorted:"sorted",selected:"selected",clickEdit:"clickEdit",clickDelete:"clickDelete",clickDoc:"clickDoc"},features:[e.qOj],decls:7,vars:2,consts:[[3,"settingsHandler","dataSettings","paged","sorted","selected"],["listTable",""],["rowDetailsTpl",""],["fieldActionsTpl",""],[3,"project"],["cButton","","color","info","variant","outline",1,"me-2",3,"title","click"],["cIcon","","name","cilPencil","size","sm"],["cButton","","color","danger","variant","outline",1,"me-2",3,"title","click"],["cIcon","","name","cilTrash","size","sm"],["cButton","","class","me-2","color","secondary","variant","outline",3,"title","click",4,"ngIf"],["cButton","","class","me-2","color","secondary","variant","outline",3,"active","title","click",4,"ngIf"],["cButton","","color","dark","variant","outline",1,"me-0",3,"title","click"],["cIcon","","name","cilDescription","size","sm"],["cButton","","color","secondary","variant","outline",1,"me-2",3,"title","click"],["cIcon","","name","cilFolder","size","sm"],["cButton","","color","secondary","variant","outline",1,"me-2",3,"active","title","click"],["cIcon","","name","cilFolderOpen","size","sm"]],template:function(o,n){1&o&&(e.TgZ(0,"div")(1,"techpromux-ui-datatable-default",0,1),e.NdJ("paged",function(r){return n.onPaged(r)})("sorted",function(r){return n.onSorted(r)})("selected",function(r){return n.onSelected(r)}),e.qZA()(),e.YNc(3,We,1,1,"ng-template",null,2,e.W1O),e.YNc(5,tt,11,15,"ng-template",null,3,e.W1O)),2&o&&(e.xp6(1),e.Q6J("settingsHandler",n.listTableSettingsHandler)("dataSettings",n.pagedDataSettings))},dependencies:[O.O5,Z.Hq3,ne.ar,k.Ws,he,te.X$],changeDetection:0})}return a})();class de extends ie.Vg{constructor(){super(),this.facade=(0,e.f3M)(me),this.flow=(0,e.f3M)(pe.Wi)}getSearchParamsDefaultValue(){return{page:0,pageSize:5,filters:{},sorts:[{prop:"created_at",dir:"desc"}]}}getPagedDataDefaultValue(){return W.Ok.getListDataDefaultValue()}getDomainFacade(){return this.facade}getPagedDataSettings$(){return this.pagedDataSettings$}goToAdd(){this.flow.startAction("","projects","add","step1").then()}onClickBtn_Edit(_){this.uiModalOpenConfirm(this.uiTranslate().instant((0,m.J)("app.projects.feature.list.edit.confirmationTitle")),this.uiTranslate().instant((0,m.J)("app.projects.feature.list.edit.confirmationBody")),t=>{t.confirmed&&(this.startLoader("List-Click-Edit-Project"),this.facade.setItemToEdit(_.id,_).then(()=>{setTimeout(()=>{this.flow.startAction("","projects","edit","step1").then(()=>{this.endLoader("List-Click-Edit-Project")})},200)}))})}onClickBtn_Delete(_){this.uiModalOpenConfirm(this.uiTranslate().instant((0,m.J)("app.projects.feature.list.delete.confirmationTitle")),this.uiTranslate().instant((0,m.J)("app.projects.feature.list.delete.confirmationBody")),t=>{t.confirmed&&(this.startLoader("List-Click-Delete"),this.addSubscription(this.facade.removeItem(_.id,_).pipe((0,G.q)(1)).subscribe(o=>{this.listItems(1===this.pagedData.items.length?{_eventName:"page",page:this.pagedData.page-1}:{_eventName:"page",page:this.pagedData.page},!0),this.uiModalOpenAlert(this.uiTranslate().instant((0,m.J)("app.projects.feature.list.deleted.confirmationTitle")),this.uiTranslate().instant((0,m.J)("app.projects.feature.list.deleted.confirmationEditedBody")),()=>{this.endLoader("List-Click-Delete")})})))},{btnConfirmIconClass:"cil-trash",btnConfirmColorClass:"danger"})}onClickBtn_Doc(_){this.startLoader("List-Click-Doc-Download"),Be.A.getInfo().then(t=>{k.Pw.isXSmall()?this.addSubscription(this.facade.openAndDownloadBudgetPdf(_.id,_,!0).pipe((0,G.q)(1)).subscribe(o=>{this.endLoader("List-Click-Doc-Download")})):this.addSubscription(this.facade.openAndDownloadBudgetPdf(_.id,_,!1).pipe((0,G.q)(1)).subscribe(o=>{this.endLoader("List-Click-Doc-Download")}))})}onDevBtnClickedEvent(_){this.__isDevMode&&(this.logger.console.log(this.__classname,"pageDataLoaded",this.pageDataLoaded),this.logger.console.log(this.__classname,"pagedData",this.pagedData),this.logger.console.log(this.__classname,"pagedData -> items",this.pagedData.items))}static#e=this.\u0275fac=function(t){return new(t||de)};static#t=this.\u0275cmp=e.Xpm({type:de,selectors:[["ng-component"]],hostBindings:function(t,o){1&t&&e.NdJ("dev-button-clicked",function(i){return o.onDevBtnClickedEvent(i)},!1,e.Jf7)},features:[e.qOj],decls:13,vars:15,consts:[["cButton","","color","light",3,"active","click"],["cIcon","","name","cib-addthis",1,"me-2"],[3,"customClasses"],[1,"mt-4","mb-4","ms-4","me-4"],["cIcon","","name","cil-house","size","lg",1,"me-2"],[3,"pagedDataSettings","paged","sorted","selected","clickEdit","clickDelete","clickDoc","init"]],template:function(t,o){1&t&&(e.TgZ(0,"techpromux-ui-page-box")(1,"techpromux-ui-navbar-box")(2,"button",0),e.NdJ("click",function(){return o.goToAdd()}),e.O4$(),e._UZ(3,"svg",1),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.kcU(),e.TgZ(6,"techpromux-ui-panel-box",2)(7,"h5",3),e.O4$(),e._UZ(8,"svg",4),e.kcU(),e.TgZ(9,"label"),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"app-projects-ui-projects-table",5),e.NdJ("paged",function(i){return o.onPage(i)})("sorted",function(i){return o.onSort(i)})("selected",function(i){return o.onSelect(i)})("clickEdit",function(i){return o.onClickBtn_Edit(i)})("clickDelete",function(i){return o.onClickBtn_Delete(i)})("clickDoc",function(i){return o.onClickBtn_Doc(i)})("init",function(i){return o.registerChild("books-table",i)}),e.qZA()()()),2&t&&(e.xp6(1),e.Tol("content-no-printable"),e.xp6(1),e.Q6J("active",!0),e.xp6(2),e.hij(" ",e.lcZ(5,11,"app.projects.feature.list.button.add")," "),e.xp6(2),e.Q6J("customClasses","table-responsive"),e.xp6(1),e.ekj("d-none",!1===o.pageDataLoaded||0!==o.pagedData.total),e.xp6(3),e.Oqu(e.lcZ(11,13,"app.projects.ui.table.nodata")),e.xp6(2),e.ekj("d-none",0===o.pagedData.total),e.Q6J("pagedDataSettings",o.pagedData))},dependencies:[Z.Hq3,ne.ar,X.hQ,X.Ys,X.Rj,ot,te.X$],changeDetection:0})}(0,le.gn)([(0,xe.Ph)(W.Ok.getListData),(0,le.w6)("design:type",Qe.y)],de.prototype,"pagedDataSettings$",void 0);var Ne=S(5430),Ee=S(4089),re=S(5619),D=S(3620),q=S(3997),Ie=S(9397);class ae extends ie.vQ{constructor(){super(),this.uuidService=(0,e.f3M)(Ne.dX),this.sanitizer=(0,e.f3M)(je.H7),this.fileUploader=(0,e.f3M)(ce.$v),this.facade=(0,e.f3M)(me),this.elementIsNew=null,this.formDataToSave=null,this.projectFormData={},this.projectFormCreated=!1,this.spacesFormsData=[],this.spacesFormsCreated=[],this.spacesDataOptionsList$=new re.X([]),this.budgetPdfUrl=null,this.formTabActive=0,this.spaceTabActive=0,this.spaceTabActiveAdded=!1,this.spaceTabActiveDeleted=!1,this.imageStoreBasePath=this.fileUploader.getImageStoreBasePath()}getDomainFacade(){return this.facade}getCurrentFlowContextName(){return""}getCurrentFlowModuleName(){return"projects"}getCurrentFlowActionName(){return this.elementIsNew?"add":"edit"}initFormGroup(){this.formGroup=this.fb.group({project:this.fb.group({}),spaces:this.fb.array([])})}initAction(){"step1"!==this.currentStep||!0!==this.currentStepIsFirstAccess||(this.elementIsNew?this.facade.setItemToEdit(null,null):(!this.elementId||!this.element)&&(this.logger.console.error(this.__classname,"There is not element to edit",this.elementId,this.element),this.facade.setItemToEdit(null,null),this.flow.closeCurrentAction().then(()=>{this.flow.startAction(this.getCurrentFlowContextName(),this.getCurrentFlowModuleName(),"list","",null,!0).then()})),this.projectFormData=this.getProjectInitialData(),this.spacesFormsData=this.getSpacesInitialData(),this.spacesFormsData.forEach((_,t)=>{this.startLoader("Add-Edit-Create-Space-Tab-"+(t+1))}))}getSpaceDefaultFormData(){return{id:this.uuidService.uuid(),$$__uuid:this.uuidService.uuid(),walls:[{},{},{},{}],doors:[{}],windows:[],modules:[{mechanisms:[{}]}]}}getProjectInitialData(){return this.elementIsNew?{}:JSON.parse(JSON.stringify(this.element))}getSpacesInitialData(){const _=this.elementIsNew?[]:this.element?.spaces?JSON.parse(JSON.stringify(this.element?.spaces)):[];return _.forEach(t=>{t.id=t.id?t.id:this.uuidService.uuid(),t.$$__uuid=this.uuidService.uuid()}),_}onProjectFormGroupCreated(_){this.logger.console.debug(this.__classname,"onProjectFormGroupCreated",_),this.formGroup.setControl("project",_),this.projectFormCreated=!0,this.onFormGroupCreated(_)}onSpaceFormGroupCreated(_,t){this.logger.console.debug(this.__classname,"onSpaceFormGroupCreated",_),this.formGroup.get("spaces").controls[t]=_,this.formIsEditable&&!0!==this.spaceTabActiveDeleted&&!0===this.spaceTabActiveAdded&&(this.spaceTabActive=t,this.spaceTabActiveAdded=!1),this.endLoader("Add-Edit-Create-Space-Tab-"+(t+1)),this.spacesFormsCreated[t]=!0,this.checkSpacesChangesSubscriptions(),this.onFormGroupCreated(_),setTimeout(()=>{this.cdr.detectChanges(),this.onActivateSpaceTabX(this.spaceTabActive)},100)}onAddItemToSpaceFormArray(){this.startLoader("Add-Edit-Create-Space-Tab-"+(this.spacesFormsData.length+1)),setTimeout(()=>{this.spaceTabActiveAdded=!0,this.spaceTabActiveDeleted=!1,this.spacesFormsData.push(this.getSpaceDefaultFormData()),setTimeout(()=>{this.cdr.detectChanges()},100)},100)}onDeleteSpaceItem(_,t){this.uiModalOpenConfirm(this.uiTranslate().instant((0,m.J)("app.projects.ui.form.spaces.delete.confirmationTitle")),this.uiTranslate().instant((0,m.J)("app.projects.ui.form.spaces.delete.confirmationBody")),o=>{o.confirmed&&this.formIsEditable&&(this.startLoader("Add-Edit-Remove-Space-Tab-"+t),setTimeout(()=>{const n=this.spacesFormsData.length,i=this.formGroup.get("spaces")?.getRawValue();for(let r=t;r<n-1;r++)this.spacesFormsData[r]={...i[r+1],$$__uuid:this.uuidService.uuid()};this.spacesFormsCreated.pop(),this.spacesFormsData.pop(),this.formGroup.get("spaces").removeAt(n-1),this.spaceTabActiveDeleted=!0,this.spaceTabActive=n<=1?0:t===n-1?t-1:t,this.endLoader("Add-Edit-Remove-Space-Tab-"+t),setTimeout(()=>{this.cdr.detectChanges(),this.onActivateSpaceTabX(this.spaceTabActive)},100)},100))})}spacesFormsDataTrackByFn(_,t){return t.$$__uuid}checkSpacesChangesSubscriptions(){const _=this.formGroup.get("spaces");this.addSubscription(_.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{this.emitSpacesDataOptionList()}));const t=_.controls.length;for(let o=0;o<t;o++){const n=_.controls[o],i=n.get("space_type_id");i.$$__hasValueChangesEventSubscription||(i.$$__hasValueChangesEventSubscription=!0,this.addSubscription(i?.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{this.emitSpacesDataOptionList()})),this.emitSpacesDataOptionList());const r=n.get("walls");r.$$__hasValueChangesEventSubscription||(r.$$__hasValueChangesEventSubscription=!0,this.addSubscription(r?.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{this.emitSpacesDataOptionList()})),this.emitSpacesDataOptionList())}this.emitSpacesDataOptionList()}emitSpacesDataOptionList(){const _=this.formGroup.get("spaces"),t=_.controls.length,o=[];for(let n=0;n<t;n++){const i=_.controls[n],r=i.get("id")?.value,c=i.get("space_type_id")?.value,l=i.get("walls")?.getRawValue().map((s,u,h)=>({wall_identifier:String.fromCharCode("A".charCodeAt(0)+u)+" - "+String.fromCharCode("A".charCodeAt(0)+(u<h.length-1?u+1:0)),wall_area:Number.parseFloat(isNaN(s.wall_width)?0:s.wall_width)*Number.parseFloat(isNaN(s.wall_height)?0:s.wall_height)}));o.push({id:r,space_type_id:c,space_area:this.facade.calculateAreaFromSpaceData(i.getRawValue()),walls:l})}this.spacesDataOptionsList$.next(o)}updateFormDataBeforeSave(){return this.formGroup&&this.formGroup.get("project")&&(this.projectFormData=this.formGroup.get("project")?.getRawValue()),this.formGroup&&this.formGroup.get("spaces")&&(this.spacesFormsData=this.formGroup.get("spaces")?.getRawValue()),this.formDataToSave=this.getFormDataToSave(),(0,$.of)(this.formDataToSave).pipe((0,Ie.b)(_=>{this.logger.console.debug(this.__classname,"updateFormDataBeforeSave -> formDataToSave",_)}),(0,ee.w)(_=>this.facade.updateProjectImagesDesigns(_,this.element)),(0,Ie.b)(_=>{this.logger.console.debug(this.__classname,"updateFormDataBeforeSave -> formDataToSave - updated",_)}))}getFormDataToSave(){const _={...this.formGroup.get("project")?.getRawValue()};delete _.$$__hr,delete _.$$__br,delete _.client.$$__hr,delete _.client.$$__br,delete _.address.$$__hr,delete _.address.$$__br;const t=this.formGroup.get("spaces")?.getRawValue();return t.forEach(n=>{if(delete n.$$__hr,delete n.$$__br,!0!==n.window_has_window&&(n.windows=[]),n.modules.forEach(i=>{delete i.$$__hr,delete i.$$__br}),n.windows.forEach(i=>{delete i.$$__hr,delete i.$$__br,i.window_area=Number.parseInt(i.window_width)*Number.parseInt(i.window_height)}),n.doors.forEach(i=>{delete i.$$__hr,delete i.$$__br,i.door_area=Number.parseInt(""+i.door_width)*Number.parseInt(""+i.door_height)}),n.walls.forEach(i=>{delete i[""],delete i.$$__hr,delete i.$$__br,i.wall_area=Number.parseInt(""+i.wall_width)*Number.parseInt(""+i.wall_height),n.windows.forEach(r=>{i.wall_identifier===r.window_wall_identifier&&(i.wall_area=i.wall_area-r.window_area)}),n.doors.forEach(r=>{i.wall_identifier===r.door_wall_identifier&&(i.wall_area=i.wall_area-r.door_area)})}),n.walls.length>=2){const i=this.facade.calculateAreaFromSpaceData(n);n.space_floor_area=Number.parseInt(""+i),n.space_ceiling_area=n.space_floor_area}else n.space_floor_area=0}),{..._,spaces:t}}isFormGroupValid(){let _=super.isFormGroupValid();return!(!_||(_=_&&this.isSpacesFormArrayValid(),!_))&&_}isProjectFormGroupValid(){return!this.formIsEditable||!(this.formGroup.get("project")?.touched&&!this.formGroup.get("project")?.valid)}isSpacesFormArrayValid(){if(!this.formIsEditable)return!0;let _=!0;return this.formGroup.get("spaces").controls.forEach((t,o)=>{_=_&&this.spacesFormsCreated[o]&&t.valid,t.get("modules").controls.forEach((n,i)=>{_=_&&n?.valid&&n?.$$__embedded&&n?.$$__embedded?.valid})}),_}isSpaceFormGroupValid(_){if(!this.formIsEditable)return!0;if(!this.spacesFormsCreated[_])return!1;const t=this.formGroup.get("spaces")?.controls[_];let o=!0;return o=o&&this.spacesFormsCreated[_]&&t.valid,t.get("modules").controls.forEach((n,i)=>{o=o&&n?.valid&&n?.$$__embedded&&n?.$$__embedded?.valid}),o}executeAction_Start(){this.flow.closeCurrentAction().then(()=>{this.flow.startAction(this.getCurrentFlowContextName(),this.getCurrentFlowModuleName(),this.getCurrentFlowActionName(),"step1",{},!0).then()})}executeAction_Previous(){this.startLoader("Add-Execute-Backward"),setTimeout(()=>{this.flow.stepBackward().then(()=>{this.formDataToSave=null,this.endLoader("Add-Execute-Backward"),setTimeout(()=>{this.cdr.detectChanges()},100)})},100)}executeAction_Next(){!this.formIsEditable||this.isFormGroupValid()?(this.startLoader("Add-Execute-Next"),setTimeout(()=>{this.flow.startStep(this.getCurrentFlowContextName(),this.getCurrentFlowModuleName(),this.getCurrentFlowActionName(),"step2").then(()=>{this.endLoader("Add-Execute-Next"),this.startLoader("Add-Execute-Next-Update-Before-Save"),this.addSubscription(this.updateFormDataBeforeSave().pipe((0,G.q)(1)).subscribe(_=>{this.endLoader("Add-Execute-Next-Update-Before-Save"),setTimeout(()=>{this.cdr.detectChanges()},100)}))})},100)):this.uiModalOpenAlert(this.uiTranslate().instant((0,m.J)("app.projects.feature.add.steps.next.confirmationTitle")),this.uiTranslate().instant((0,m.J)(this.elementIsNew?"app.projects.feature.add.steps.next.confirmationAddedBody":"app.projects.feature.add.steps.next.confirmationEditedBody")),_=>{window.scrollTo(0,0),this.formGroup.markAsDirty(),this.formGroup.markAllAsTouched(),this.formGroup.get("spaces").controls.forEach((o,n)=>{o.markAsDirty(),o.markAllAsTouched(),o.get("modules").controls.forEach((i,r)=>{i.markAsDirty(),i.markAllAsTouched(),i.$$__embedded.markAsDirty(),i.$$__embedded.markAllAsTouched()})}),setTimeout(()=>{this.formService.detectChanges()},100)})}executeAction_End(){this.uiModalOpenConfirm(this.uiTranslate().instant((0,m.J)("app.projects.feature.add.steps.end.confirmationTitle")),this.uiTranslate().instant((0,m.J)(this.elementIsNew?"app.projects.feature.add.steps.end.confirmationAddedBody":"app.projects.feature.add.steps.end.confirmationEditedBody")),_=>{_.confirmed&&(this.startLoader("Add-Execute-End-Go-To-Last-Step"),setTimeout(()=>{const t=this.elementIsNew?null:this.elementId,o={...this.formDataToSave};this.addSubscription(this.getDomainFacade().saveItem(t,o).pipe((0,G.q)(1)).subscribe(n=>{this.endLoader("Add-Execute-End-Go-To-Last-Step"),this.logger.console.debug("Item saved!!!",n),n?this.uiModalOpenAlert(this.uiTranslate().instant((0,m.J)("app.projects.feature.add.step3.alert.confirmationTitle")),this.uiTranslate().instant((0,m.J)(this.elementIsNew?"app.projects.feature.add.step3.alert.confirmationAddedBody":"app.projects.feature.add.step3.alert.confirmationEditedBody")),()=>{this.elementIsNew?(this.logger.console.debug("Item added!!!",n),this.facade.setItemToEdit(n.id,n).then(()=>{this.flow.startAction("","projects","edit","step1",null,!0).then()})):(this.logger.console.debug("Item updated!!!",n),this.facade.setItemToEdit(n.id,n).then(()=>{this.executeAction_Previous(),this.budgetPdfUrl=null,this.onActivateProjectTabX(this.formTabActive),setTimeout(()=>{this.cdr.detectChanges()},100)}))}):this.uiModalOpenAlert(this.uiTranslate().instant((0,m.J)("app.projects.feature.add.step3.alert.confirmationErrorTitle")),this.uiTranslate().instant((0,m.J)(this.elementIsNew?"app.projects.feature.add.step3.alert.confirmationAddedErrorBody":"app.projects.feature.add.step3.alert.confirmationEditedErrorBody")),i=>{})}))},100))})}executeAction_Exit(){this.uiModalOpenConfirm(this.uiTranslate().instant((0,m.J)("app.projects.feature.add.steps.exit.confirmationTitle")),this.uiTranslate().instant((0,m.J)("app.projects.feature.add.steps.exit.confirmationBody")),_=>{_.confirmed&&setTimeout(()=>{this.flow.closeCurrentAction().then(()=>{this.flow.startAction(this.getCurrentFlowContextName(),this.getCurrentFlowModuleName(),"list","",null,!0).then()})},100)})}onActivateProjectTabX(_){switch(this.formTabActive=_,_){case 0:case 1:case 2:case 3:case 4:default:break;case 5:null===this.budgetPdfUrl&&(this.startLoader("Add-Edit-Budget-Pdf-Load"),this.addSubscription(this.facade.getUrlForBudgetPdf(this.elementId,this.element).pipe((0,G.q)(1)).subscribe(t=>{this.endLoader("Add-Edit-Budget-Pdf-Load"),t&&(this.budgetPdfUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t),setTimeout(()=>{this.cdr.detectChanges()},100))})))}setTimeout(()=>{this.cdr.detectChanges()},100)}onActivateSpaceTabX(_){this.spaceTabActive=_,setTimeout(()=>{this.cdr.detectChanges()},100)}isVisibleTab_GENERAL_DATA(){return!0}isVisibleTab_SPACES(){return!this.elementIsNew}isVisibleTab_DETAILS(){return!this.elementIsNew}isVisibleTab_BUDGET(){return!this.elementIsNew}isDisabledTab_GENERAL_DATA(){return!1}isDisabledTab_SPACES(){return this.elementIsNew}isDisabledTab_DETAILS(){return this.elementIsNew}isDisabledTab_BUDGET(){return this.elementIsNew}isVisibleBtn_Exit(){return!0}getSpaceWallsDesignsGalleries(_){const t=[];return _.walls.forEach(o=>{t.push(...o.designs_gallery)}),t}hasMobileSize(){return k.Pw.hasMobileSize()}onDevBtnClickedEvent(_){this.__isDevMode&&(this.logger.console.log(this.__classname,"Id, is New, Element",this.elementId,this.elementIsNew,this.element),this.logger.console.log(this.__classname,"formGroup",this.formGroup),this.logger.console.log(this.__classname,"form.getRawValue",this.formGroup.getRawValue()),this.logger.console.log(this.__classname,"formDataToSave",this.formDataToSave),this.logger.console.log(this.__classname,"getFormDataToSave",this.getFormDataToSave()))}printThis(){window.print()}static#e=this.\u0275fac=function(t){return new(t||ae)};static#t=this.\u0275cmp=e.Xpm({type:ae,selectors:[["ng-component"]],hostBindings:function(t,o){1&t&&e.NdJ("dev-button-clicked",function(i){return o.onDevBtnClickedEvent(i)},!1,e.Jf7)},features:[e.qOj],decls:0,vars:0,template:function(t,o){},encapsulation:2})}(0,le.gn)([(0,Ee.cB)(W.Ok.getEditElementItemData),(0,le.w6)("design:type",Object)],ae.prototype,"element",void 0),(0,le.gn)([(0,Ee.cB)(W.Ok.getEditElementIdData),(0,le.w6)("design:type",Object)],ae.prototype,"elementId",void 0);var d=S(5286);let fe=(()=>{class a extends ie.e1{constructor(){super(),this.formGroup=null,this.formModel=[],this.initialData={},this.editable=!0,this.optionsKeys=this.getDefaultOptionsKeys(),this.optionsLists=this.getDefaultOptionsLists(),this.formGroupCreated=new e.vpe,this.formModelUpdated=new e.vpe,this.deleteItem=new e.vpe,this.translatePipe=(0,e.f3M)(te.X$),this.optionItemLabelPipe=(0,e.f3M)(k.wO),this.formService=(0,e.f3M)(d.w1X),this.optionsListsService=(0,e.f3M)(pe.cu),this.uuidService=(0,e.f3M)(Ne.dX),this.defaultFormArrayEndTplLayout={classes:{actions_container:"df-actions_container d-flex justify-content-end col",actions_label:"df-actions_label d-none- d-xs-block",actions_text_align:"df-actions_text_align text-right d-flex align-items-end",actions_btn_insert:"df-actions_btn_insert btn btn-outline-dark text-nowrap me-2",actions_btn_insert_icon:"df-actions_btn_insert_icon",actions_btn_insert_icon_name:"cib-addthis",actions_btn_add:"df-actions_btn_add btn btn-outline-dark text-nowrap me-2",actions_btn_add_icon:"df-actions_btn_add_icon",actions_btn_add_icon_name:"cib-addthis",actions_btn_remove:"df-actions_btn_remove btn btn-outline-danger text-nowrap",actions_btn_remove_icon:"df-actions_btn_remove_icon",actions_btn_remove_icon_name:"cil-trash"},labels:{actions_btn_insert_lbl:(0,m.J)("ui.dynamic-forms.arrays.actions_btn_insert_lbl"),actions_btn_insert_title:(0,m.J)("ui.dynamic-forms.arrays.actions_btn_insert_title"),actions_btn_add_lbl:(0,m.J)("ui.dynamic-forms.arrays.actions_btn_add_lbl"),actions_btn_add_title:(0,m.J)("ui.dynamic-forms.arrays.actions_btn_add_title"),actions_btn_remove_lbl:(0,m.J)("ui.dynamic-forms.arrays.actions_btn_remove_lbl"),actions_btn_remove_title:(0,m.J)("ui.dynamic-forms.arrays.actions_btn_remove_lbl")},behaviors:{show_actions_btn_insert:!0,show_actions_btn_add:!0,show_actions_btn_remove:!0,disable_action_btn_remove_in_only_item:!0,show_hr_line_between_items:!1,show_hr_line_in_last_item:!1}}}onInitOrOnChanges(t){super.onInitOrOnChanges(t),this.optionsLists={...this.optionsLists,...this.getOptionsListsData(this.editable)},this.formLayout=this.getFormLayout(this.editable),this.formModel=this.getFormModel(this.editable)}onFormModelUpdated(t){this.formModelUpdated.emit(t)}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["ng-component"]],inputs:{initialData:"initialData",editable:"editable",optionsKeys:"optionsKeys",optionsLists:"optionsLists"},outputs:{formGroupCreated:"formGroupCreated",formModelUpdated:"formModelUpdated",deleteItem:"deleteItem"},features:[e.qOj],decls:0,vars:0,template:function(o,n){},encapsulation:2,changeDetection:0})}return a})();function nt(a,_){1&a&&e._UZ(0,"div",4)}function at(a,_){1&a&&e._UZ(0,"hr",5)}const it=function(a){return{modelId:"$$__hr",template:a,align:"END"}},st=function(a){return[a]};let Je=(()=>{class a extends fe{constructor(){super()}getDefaultOptionsKeys(){return["geo_infos_states","geo_infos_cities"]}getDefaultOptionsLists(){return{}}getFormModel(t=!0){return[new d.b1u({id:"id",value:this.initialData?.id,required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"reference",value:this.initialData?.reference,label:(0,m.J)("app.projects.ui.form.reference"),required:!0,readOnly:!t,disabled:!t,additional:{translate_label:!0}}),new d.b1u({id:"$$__hr",value:"",required:!1,inputType:"hidden"}),new d.S_O({id:"client",label:this.translatePipe.transform((0,m.J)("app.projects.ui.form.client.header")),group:[new d.b1u({id:"$$__hr",value:"",required:!1,inputType:"hidden"}),new d.b1u({id:"first_name",value:this.initialData?.client?.first_name,label:(0,m.J)("app.projects.ui.form.client.first_name"),required:!0,readOnly:!t,disabled:!t,additional:{translate_label:!0},validators:{required:null}}),new d.b1u({id:"last_name",value:this.initialData?.client?.last_name,label:(0,m.J)("app.projects.ui.form.client.last_name"),required:!1,readOnly:!t,disabled:!t,additional:{translate_label:!0}}),new d.b1u({id:"company",value:this.initialData?.client?.company,label:(0,m.J)("app.projects.ui.form.client.company"),required:!1,readOnly:!t,disabled:!t,additional:{translate_label:!0}}),new d.b1u({id:"email",value:this.initialData?.client?.email,label:(0,m.J)("app.projects.ui.form.client.email"),inputType:"email",required:!1,readOnly:!t,disabled:!t,validators:{email:null},additional:{translate_label:!0}}),new d.b1u({id:"cellphone",value:this.initialData?.client?.cellphone,label:(0,m.J)("app.projects.ui.form.client.cellphone"),required:!1,readOnly:!t,disabled:!t,additional:{translate_label:!0}}),new d.b1u({id:"nif",value:this.initialData?.client?.nif,label:(0,m.J)("app.projects.ui.form.client.nif"),required:!1,readOnly:!t,disabled:!t,additional:{translate_label:!0}})]},{element:{host:"",container:"",children:""},grid:{host:"",container:"",children:""}}),new d.b1u({id:"$$__hr",value:"",required:!1,inputType:"hidden"}),new d.S_O({id:"address",label:this.translatePipe.transform((0,m.J)("app.projects.ui.form.address.header")),group:[new d.b1u({id:"$$__hr",value:"",required:!1,inputType:"hidden"}),new d.b1u({id:"street",value:this.initialData?.address?.street,label:(0,m.J)("app.projects.ui.form.address.street"),required:!1,readOnly:!t,disabled:!t,additional:{translate_label:!0}}),new d.b1u({id:"additional",value:this.initialData?.address?.additional,label:(0,m.J)("app.projects.ui.form.address.additional"),required:!1,readOnly:!t,disabled:!t,additional:{translate_label:!0}}),new d.b1u({id:"country_code",value:this.initialData?.address?.country_code,inputType:"hidden",label:(0,m.J)("app.projects.ui.form.address.country"),required:!1,readOnly:!t,disabled:!t,additional:{translate_label:!0}}),new d.b1u({id:"region_code",value:this.initialData?.address?.region_code,inputType:"hidden",label:(0,m.J)("app.projects.ui.form.address.region"),required:!1,readOnly:!t,disabled:!t,additional:{translate_label:!0}}),new d.nMt({id:"state_code",value:this.initialData?.address?.state_code,label:(0,m.J)("app.projects.ui.form.address.state"),required:!1,disabled:!t,options:this.optionsLists.geo_infos_states$,additional:{translate_label:!0,use_ng_select:!0,use_ng_select__clearable:!1}}),new d.nMt({id:"city_code",value:this.initialData?.address?.city_code,label:(0,m.J)("app.projects.ui.form.address.city"),required:!1,disabled:!t,options:this.optionsLists.geo_infos_cities$,additional:{translate_label:!0,use_ng_select:!1,use_ng_select__clearable:!1}}),new d.b1u({id:"postal_code",value:this.initialData?.address?.postal_code,label:(0,m.J)("app.projects.ui.form.address.postal_code"),required:!1,readOnly:!t,disabled:!t,additional:{translate_label:!0}}),new d.b1u({id:"$$__hr",value:"",required:!1,inputType:"hidden"}),new d.dwp({id:"has_elevator",value:!0===this.initialData?.address?.has_elevator,label:(0,m.J)("app.projects.ui.form.address.has_elevator"),required:!1,disabled:!t,additional:{translate_label:!0}})]},{element:{host:"",container:"",children:""},grid:{host:"",container:"",children:""}}),new d.b1u({id:"$$__hr",value:"",required:!1,inputType:"hidden"}),new d.HBf({id:"description",value:this.initialData?.description,label:(0,m.J)("app.projects.ui.form.description"),required:!1,readOnly:!t,disabled:!t,rows:5,additional:{translate_label:!0}}),new d.b1u({id:"$$__hr",value:"",required:!1,inputType:"hidden"})]}getFormLayout(t=!0){return{$$__hr:{element:{host:"col-md-12 col-sm-12 col-xs-12"},grid:{host:"col-md-12 col-sm-12 col-xs-12"}},$$__br:{element:{host:"col-md-12 col-sm-12 col-xs-12"},grid:{host:"col-md-12 col-sm-12 col-xs-12"}},id:{element:{host:"d-none"},grid:{host:"d-none"}},reference:{element:{host:"col-md-6 col-sm-12 col-xs-12 input-required",label:t?"input-required":""},grid:{host:"col-md-6 col-sm-12 col-xs-12 input-required",label:t?"input-required":""}},first_name:{element:{host:"col-md-4 col-sm-6 col-xs-12",label:t?"input-required":""},grid:{host:"col-md-4 col-sm-6 col-xs-12",label:t?"input-required":""}},last_name:{element:{host:"col-md-4 col-sm-6 col-xs-12"},grid:{host:"col-md-4 col-sm-6 col-xs-12"}},company:{element:{host:"col-md-4 col-sm-6 col-xs-12"},grid:{host:"col-md-4 col-sm-6 col-xs-12"}},email:{element:{host:"col-md-6 col-sm-6 col-xs-12"},grid:{host:"col-md-6 col-sm-6 col-xs-12"}},cellphone:{element:{host:"col-md-3 col-sm-6 col-xs-12"},grid:{host:"col-md-3 col-sm-6 col-xs-12"}},nif:{element:{host:"col-md-3 col-sm-6 col-xs-12"},grid:{host:"col-md-3 col-sm-6 col-xs-12"}},street:{element:{host:"col-md-8 col-sm-12 col-xs-12"},grid:{host:"col-md-8 col-sm-12 col-xs-12"}},additional:{element:{host:"col-md-4 col-sm-6 col-xs-12"},grid:{host:"col-md-4 col-sm-6 col-xs-12"}},country_code:{element:{host:"d-none"},grid:{host:"d-none"}},region_code:{element:{host:"d-none"},grid:{host:"d-none"}},state_code:{element:{host:"col-md-4 col-sm-6 col-xs-12"},grid:{host:"col-md-4 col-sm-6 col-xs-12"}},city_code:{element:{host:"col-md-4 col-sm-6 col-xs-12"},grid:{host:"col-md-4 col-sm-6 col-xs-12"}},postal_code:{element:{host:"col-md-4 col-sm-6 col-xs-12"},grid:{host:"col-md-4 col-sm-6 col-xs-12"}},has_elevator:{element:{host:"col-md-12 col-sm-12 col-xs-12"},grid:{host:"col-md-12 col-sm-12 col-xs-12"}},description:{element:{host:"col-sm-12 col-sm-12 col-xs-12"},grid:{host:"col-sm-12 col-sm-12 col-xs-12"}}}}getOptionsListsData(t=!0){const o={};return this.optionsKeys.forEach(n=>{o[n+"$"]=new re.X([]),this.startLoader("Add-Edit-Project-Form-Options-"+n)}),this.optionsListsService.getOptionsLists(this.optionsKeys,{orderByLabelAlphabetical:!0}).results?.forEach(n=>{this.addSubscription(n.options$.pipe((0,G.q)(1)).subscribe(i=>{o[n.fullKey+"$"].next([{label:"",value:"",item:{}},...i]),this.endLoader("Add-Edit-Project-Form-Options-"+n.fullKey)}))}),o}onFormGroupCreated(t){const o=t;o.patchValue(this.initialData,{emitEvent:!1}),this.addSubscription(o.get("address")?.get("state_code")?.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{this.editable&&o.get("address")?.get("state_code")?.dirty&&(o.get("address")?.get("city_code")?.setValue(""),this.startLoader("Add-Edit-Address-STATE-CITY"));const n=o.get("address")?.get("state_code")?.value,r=["geo_infos_cities__"+(n&&""!==n?n:"---")];this.optionsListsService.getOptionsLists(r,{orderByLabelAlphabetical:!0}).results?.forEach(c=>{this.addSubscription(c.options$.pipe((0,G.q)(1)).subscribe(l=>{this.endLoader("Add-Edit-Address-STATE-CITY"),this.optionsLists[c.key+"$"].next([{label:"",value:"",item:{}},...l]),setTimeout(()=>{this.formService.detectChanges()},100)}))})})),o.get("address")?.get("state_code")?.setValue(o.get("address")?.get("state_code")?.value),this.formGroupCreated.emit(t)}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-projects-ui-general-form"]],features:[e.qOj],decls:6,vars:10,consts:[[3,"formModel","defaultFormArrayEndTplLayout","customModelControlsTpl","formLayout","keepFormValuesOnChanges","markAllAsReadOnly","formGroupCreated","formModelUpdated"],["dynamicFormsComponent",""],["newLine1HrTpl",""],["separator1HrTpl",""],[1,"col-xs-12","mb-2","m-auto"],[1,"",2,"width","100%","border","2px solid #0f0f0f","opacity","0.3"]],template:function(o,n){if(1&o&&(e.TgZ(0,"techpromux-ui-dynamic-forms-default",0,1),e.NdJ("formGroupCreated",function(r){return n.onFormGroupCreated(r)})("formModelUpdated",function(r){return n.onFormModelUpdated(r)}),e.qZA(),e.YNc(2,nt,1,0,"ng-template",null,2,e.W1O),e.YNc(4,at,1,0,"ng-template",null,3,e.W1O)),2&o){const i=e.MAs(5);e.Q6J("formModel",n.formModel)("defaultFormArrayEndTplLayout",n.defaultFormArrayEndTplLayout)("customModelControlsTpl",e.VKq(8,st,e.VKq(6,it,i)))("formLayout",n.formLayout)("keepFormValuesOnChanges",!0)("markAllAsReadOnly",!n.editable)}},dependencies:[k.bV],changeDetection:0})}return a})();function lt(a,_){1&a&&e._UZ(0,"div",5)}function rt(a,_){1&a&&e._UZ(0,"hr",6)}function ct(a,_){1&a&&e._UZ(0,"hr",7)}const dt=function(a){return{modelId:"$$__hr",template:a,align:"END"}},_t=function(a){return{modelId:"_mechanisms",template:a,align:"START"}},ut=function(a){return{modelId:"_module_labour_price",template:a,align:"END"}},pt=function(a,_,t){return[a,_,t]};let mt=(()=>{class a extends fe{constructor(){super(),this.optionsForMechanismsIdsUUIDs=[],this.optionsForMechanismsIds=[]}getDefaultOptionsKeys(){return[]}getDefaultOptionsLists(){return{}}getFieldsIds(){return["module_wall_identifier","module_reference_point","module_keep_existing_installation","module_make_new_installation","module_distance_to_reference_point","module_bottom_height","module_trenches_count","module_trenches_direction","mechanisms","module_frame_new_id","module_frame_new_price","module_frame_new_iva_percent","module_frame_installation_price","module_frame_installation_iva_percent"]}onInitOrOnChanges(t){this.group&&(this.initialData={},this.getFieldsIds().forEach(o=>{const n=this.group.find(i=>i.id===o);n&&(this.initialData["_"+o]=null!=n.value?n.value:"")})),super.onInitOrOnChanges(t)}getFormModel(t=!0){return[new d.nMt({id:"_module_wall_identifier",value:"A - B",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.modules.wall"),disabled:!t,options:this.optionsLists.walls_identifiers$.asObservable(),additional:{translate_label:!0}}),new d.dwp({id:"_module_keep_existing_installation",value:!0,required:!1,label:(0,m.J)("app.projects.ui.form.spaces.modules.keep_existing_installation"),disabled:!t,additional:{translate_label:!0}}),new d.dwp({id:"_module_make_new_installation",value:!1,required:!1,label:(0,m.J)("app.projects.ui.form.spaces.modules.new_installation"),disabled:!t,additional:{translate_label:!0}}),new d.nMt({id:"_module_reference_point",value:"A",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.modules.reference_point"),disabled:!t,options:[],additional:{translate_label:!0}}),new d.b1u({id:"_module_distance_to_reference_point",inputType:"number",value:500,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.modules.distance_to_reference_point"),readOnly:!t,disabled:!t,validators:{required:null,min:0},additional:{translate_label:!0}}),new d.b1u({id:"_module_bottom_height",inputType:"number",value:500,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.modules.under_height"),readOnly:!t,disabled:!t,validators:{required:null,min:0},additional:{translate_label:!0}}),new d.b1u({id:"_module_trenches_count",inputType:"number",value:1,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.modules.trenches_count"),readOnly:!t,disabled:!t,validators:{required:null,min:1},additional:{translate_label:!0}}),new d.nMt({id:"_module_trenches_direction",value:"NONE",required:!1,label:(0,m.J)("app.projects.ui.form.spaces.modules.trenches_direction"),disabled:!t,options:this.optionsLists.modules_trenches_directions$.asObservable(),additional:{translate_label:!0}}),new d.RRz({id:"_mechanisms",label:this.translatePipe.transform((0,m.J)("app.projects.ui.form.spaces.mechanisms.header")),initialCount:this.initialData?._mechanisms&&this.initialData?._mechanisms?.length>0?this.initialData?._mechanisms?.length:1,groupFactory:()=>[new d.b1u({id:"module_mechanism_show_price",value:0,required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.nMt({id:"module_mechanism_category_id",value:"",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.mechanisms.mechanism_new_category_id"),disabled:!t,options:this.optionsLists.products_categories__electrical_mechanisms$.asObservable(),additional:{translate_label:!0},relations:[]}),new d.nMt({id:"module_mechanism_new_id",value:"",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.mechanisms.mechanism_new_id"),filterable:!0,disabled:!t,options:[],additional:{translate_label:!0,use_ng_select:!0,use_ng_select__clearable:!1},relations:[]}),new d.b1u({id:"module_mechanism_new_price",value:"0.00",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.mechanisms.mechanism_new_price"),readOnly:!t,disabled:!t,additional:{translate_label:!0,onblur_parse_value_to_float_with_fixed:2},validators:{min:0},relations:[{match:d.RFZ,operator:d.JHc,when:[{id:"module_mechanism_show_price",value:!0}]},{match:d._Vz,operator:d.JHc,when:[{id:"module_mechanism_show_price",value:!0}]}]}),new d.b1u({id:"module_mechanism_new_iva_percent",value:"0.00",required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"module_mechanism_installation_price",value:"0.00",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.mechanisms.mechanism_new_installation_price"),readOnly:!t,disabled:!t,additional:{translate_label:!0,onblur_parse_value_to_float_with_fixed:2},validators:{min:0},relations:[{match:d.RFZ,operator:d.JHc,when:[{id:"module_mechanism_show_price",value:!0}]},{match:d._Vz,operator:d.JHc,when:[{id:"module_mechanism_show_price",value:!0}]}]}),new d.b1u({id:"module_mechanism_installation_iva_percent",value:"0.00",required:!1,inputType:"hidden",readOnly:!t,disabled:!t})]},{element:{host:"spaces_form_modules_sub_form_mechanisms_array_host pt-3 pb-3 mt-2 mb-2 m-auto",container:"",children:""},grid:{host:"spaces_form_modules_sub_form_mechanisms_array_host pt-3 pb-3 mt-2 mb-2 m-auto",container:"",children:""}}),new d.nMt({id:"_module_frame_new_id",value:"",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.modules.frame_new_id"),disabled:!t,options:this.optionsLists.products_electrical_mechanisms__frames$.asObservable(),additional:{translate_label:!0},relations:[{match:d.RFZ,operator:d.JHc,when:[{id:"_module_make_new_installation",value:!0}]},{match:d._Vz,operator:d.JHc,when:[{id:"_module_make_new_installation",value:!0}]}]}),new d.b1u({id:"_module_frame_new_price",value:"0.00",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.modules.frame_new_price"),readOnly:!t,disabled:!t,additional:{translate_label:!0,onblur_parse_value_to_float_with_fixed:2},relations:[{match:d.RFZ,operator:d.JHc,when:[{id:"_module_make_new_installation",value:!0}]},{match:d._Vz,operator:d.JHc,when:[{id:"_module_make_new_installation",value:!0}]}]}),new d.b1u({id:"_module_frame_new_iva_percent",value:"0.00",required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"_module_frame_installation_price",value:"0.00",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.modules.frame_new_labour_price"),readOnly:!t,disabled:!t,additional:{translate_label:!0,onblur_parse_value_to_float_with_fixed:2},relations:[{match:d.RFZ,operator:d.JHc,when:[{id:"_module_make_new_installation",value:!0}]},{match:d._Vz,operator:d.JHc,when:[{id:"_module_make_new_installation",value:!0}]}]}),new d.b1u({id:"_module_frame_installation_iva_percent",value:"0.00",required:!1,inputType:"hidden",readOnly:!t,disabled:!t})]}getFormLayout(t=!0){return{$$__hr:{element:{host:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"},grid:{host:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"}},$$__br:{element:{host:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"},grid:{host:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"}},_module_wall_identifier:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},_module_keep_existing_installation:{element:{host:"col-xl-3 col-lg-3 col-md-4 col-sm-4 col-xs-12 pt-4"},grid:{host:"col-xl-3 col-lg-3 col-md-4 col-sm-4 col-xs-12 pt-4"}},_module_make_new_installation:{element:{host:"col-xl-7 col-lg-7 col-md-4 col-sm-4 col-xs-12 pt-4"},grid:{host:"col-xl-7 col-lg-7 col-md-4 col-sm-4 col-xs-12 pt-4"}},_module_reference_point:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},_module_distance_to_reference_point:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},_module_bottom_height:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},_module_trenches_count:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},_module_trenches_direction:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12 d-none",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12 d-none",label:t?"input-required":""}},_module_frame_new_id:{element:{host:"col-xl-8 col-lg-8 col-md-6 col-sm-12 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-8 col-lg-8 col-md-6 col-sm-12 col-xs-12",label:t?"input-required":""}},_module_frame_new_price:{element:{host:"col-xl-2 col-lg-2 col-md-3 col-sm-6 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-3 col-sm-6 col-xs-12",label:t?"input-required":""}},_module_frame_new_iva_percent:{element:{host:"d-none"},grid:{host:"d-none"}},_module_frame_installation_price:{element:{host:"col-xl-2 col-lg-2 col-md-3 col-sm-6 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-3 col-sm-6 col-xs-12",label:t?"input-required":""}},_module_frame_installation_iva_percent:{element:{host:"d-none"},grid:{host:"d-none"}},module_mechanism_show_price:{element:{host:"d-none"},grid:{host:"d-none"}},module_mechanism_category_id:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},module_mechanism_new_id:{element:{host:"col-xl-6 col-lg-6 col-md-8 col-sm-8 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-6 col-lg-6 col-md-8 col-sm-8 col-xs-12",label:t?"input-required":""}},module_mechanism_new_price:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},module_mechanism_new_iva_percent:{element:{host:"d-none"},grid:{host:"d-none"}},module_mechanism_installation_price:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},module_mechanism_installation_iva_percent:{element:{host:"d-none"},grid:{host:"d-none"}}}}getOptionsListsData(t=!0){return{}}onFormGroupCreated(t){const o=t;o.patchValue(this.initialData,{emitEvent:!1}),this.getFieldsIds().forEach(g=>{this.addSubscription(o.get("_"+g)?.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{if(this.group){const b=this.group.find(f=>f.id===g);if(b){const f=o.getRawValue();b.value=f["_"+g]}}}))});const n=o.get("_module_wall_identifier"),i=o.get("_module_reference_point"),r=o.get("_module_keep_existing_installation"),c=o.get("_module_make_new_installation"),l=o.get("_module_frame_new_id"),s=o.get("_module_frame_new_price"),u=o.get("_module_frame_new_iva_percent"),h=o.get("_module_frame_installation_price"),v=o.get("_module_frame_installation_iva_percent"),p=(o.get("_module_photos_gallery"),o.get("_mechanisms"));n.$$__hasValueChangesEventSubscription||(n.$$__hasValueChangesEventSubscription=!0,this.addSubscription(n.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{const g=n.value,b=this.formModel.find(f=>"_module_reference_point"===f.id);if(b){const[f,w]=(g+" - ").split(" - "),x=[{label:f,value:f},{label:w,value:w}];b.options=[...x],b.options$=(0,$.of)([...x]),i.value!==f&&i.value!==w&&i.setValue(f),setTimeout(()=>{this.formService.detectChanges()},100)}}))),n.setValue(n.value),c.$$__hasValueChangesEventSubscription||(c.$$__hasValueChangesEventSubscription=!0,this.addSubscription(c.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{const g=c.value;g===!!r.value&&r.setValue(!g),g&&this.editable&&(c.disable(),r.enable()),g||(l.setValue(null),s.setValue("0.00"),u.setValue("0.00"),h.setValue("0.00"),v.setValue("0.00")),p.controls.forEach((b,f)=>{if(b.get("module_mechanism_show_price")?.setValue(g,{emitEvent:!0}),g){if(g&&this.editable&&c.dirty&&null!==b.get("module_mechanism_new_id")?.value&&void 0!==b.get("module_mechanism_new_id")?.value&&""!==b.get("module_mechanism_new_id")?.value){const x=b.get("module_mechanism_new_id")?.value;b.get("module_mechanism_new_id")?.setValue("---"),setTimeout(()=>{b.get("module_mechanism_new_id")?.markAsDirty(),b.get("module_mechanism_new_id")?.setValue(x)},201)}}else b.get("module_mechanism_new_price")?.setValue("0.00"),b.get("module_mechanism_new_iva_percent")?.setValue("0.00"),b.get("module_mechanism_installation_price")?.setValue("0.00"),b.get("module_mechanism_installation_iva_percent")?.setValue("0.00")})}))),r.$$__hasValueChangesEventSubscription||(r.$$__hasValueChangesEventSubscription=!0,this.addSubscription(r.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{const g=r.value;g===!!c.value&&c.setValue(!g),g&&this.editable&&(r.disable(),c.enable())}))),r.setValue(!0!==r.value&&!0!==c.value||r.value),l.$$__hasValueChangesEventSubscription||(l.$$__hasValueChangesEventSubscription=!0,this.addSubscription(l.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{if(!this.editable||!l.dirty)return;const g=l.value,f=this.optionsLists.products_electrical_mechanisms__frames$.getValue().find(j=>j.value===g),w=Number.parseFloat(f?.item?.price);s.setValue(Number.isNaN(w)?"0.00":w.toFixed(2));const x=Number.parseFloat(f?.item?.iva_percent);u.setValue(Number.isNaN(x)?"0.00":x.toFixed(2));const I=Number.parseFloat(f?.item?.labour_price);h.setValue(Number.isNaN(I)?"0.00":I.toFixed(2));const F=Number.parseFloat(f?.item?.labour_iva_percent);v.setValue(Number.isNaN(F)?"0.00":F.toFixed(2));const y=Number.parseFloat(f?.item?.installation_price);h.setValue(Number.isNaN(y)?"0.00":y.toFixed(2));const J=Number.parseFloat(f?.item?.installation_iva_percent);v.setValue(Number.isNaN(J)?"0.00":J.toFixed(2))}))),this.addSubscription(p.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{const g=this._internalFormModel.find(f=>"_mechanisms"===f.id),b=g?g.groups:[];p.controls.forEach((f,w)=>{const x=b[w].group,I=f.get("module_mechanism_show_price");if(I){const M=c.value;I.value!==M&&I.setValue(M)}const F=f.get("module_mechanism_category_id"),J=(x.find(M=>"module_mechanism_category_id"===M.id),f.get("module_mechanism_new_id")),j=x.find(M=>"module_mechanism_new_id"===M.id),A=f.get("module_mechanism_new_price"),C=f.get("module_mechanism_new_iva_percent"),E=f.get("module_mechanism_installation_price"),N=f.get("module_mechanism_installation_iva_percent");if(F.$$__index=w,J.$$__index=w,!J.$$__hasValueChangesEventSubscription){J.$$__hasValueChangesEventSubscription=!0;const M=this.uuidService.uuid();J.$$__uuid=M,F.$$__uuid=M,this.addSubscription(J?.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{if(!this.editable||!J.dirty)return;const V=J.value,oe=this.optionsForMechanismsIds[F.$$__uuid].options.find(U=>U.value===V),L=Number.parseFloat(oe?.item?.price);A.setValue(Number.isNaN(L)?"0.00":L.toFixed(2));const P=Number.parseFloat(oe?.item?.iva_percent);C.setValue(Number.isNaN(P)?"0.00":P.toFixed(2));const z=Number.parseFloat(oe?.item?.installation_price);E.setValue(Number.isNaN(z)?"0.00":z.toFixed(2));const Y=Number.parseFloat(oe?.item?.installation_iva_percent);N.setValue(Number.isNaN(Y)?"0.00":Y.toFixed(2)),!0!==I?.value&&(A.setValue("0.00"),C.setValue("0.00"),E.setValue("0.00"),N.setValue("0.00"))}))}F.$$__hasValueChangesEventSubscription||(F.$$__hasValueChangesEventSubscription=!0,this.addSubscription(F?.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{const M=F?.value,V="products_electrical_mechanisms_by_category_id__"+(M&&""!==M?M:"---"),B=[V];this.startLoader("Add-Edit-Project-ELECTRICAL-MECHANISM"),this.optionsListsService.getOptionsLists(B,{orderByLabelAlphabetical:!0}).results?.forEach(oe=>{this.addSubscription(oe.options$.pipe((0,G.q)(1)).subscribe(L=>{if(this.endLoader("Add-Edit-Project-ELECTRICAL-MECHANISM"),oe.fullKey===V){const P=[{label:"",value:"",item:{}},...L];j.options=L,j.options$=(0,$.of)(P),this.optionsForMechanismsIds[F.$$__uuid]={options:P,options$:(0,$.of)(P),control:J,model:j},setTimeout(()=>{this.formService.detectChanges()},100)}}))}),this.editable&&F.dirty&&(J?.setValue(null),A?.setValue("0.00"),C?.setValue("0.00"),E?.setValue("0.00"),N?.setValue("0.00"))})),F?.setValue(F.value)),this.optionsForMechanismsIdsUUIDs[w]=F.$$__uuid}),setTimeout(()=>{this.formService.detectChanges()},100)})),this.formGroup=t,this.formGroupCreated.emit(t)}onFormModelUpdated(t){this._internalFormModel=t,super.onFormModelUpdated(t)}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-projects-ui-module-item-form"]],inputs:{context:"context",group:"group",index:"index"},features:[e.qOj],decls:8,vars:18,consts:[[3,"formModel","formLayout","keepFormValuesOnChanges","markAllAsReadOnly","showDefaultErrorsTpl","defaultFormArrayEndTplLayout","useCustomArrayBtnTranslationsPrefix","customModelControlsTpl","formGroupCreated","formModelUpdated"],["dynamicFormsComponent",""],["newLine1HrTpl",""],["separator1HrTpl",""],["separator2HrTpl",""],[1,"col-xs-12","mb-2","m-auto"],[1,"",2,"width","100%","border","1px solid #0f0f0f"],[1,"mt-3","mb-2","m-auto",2,"width","calc(100% - 20px)","border","1px solid #0f0f0f"]],template:function(o,n){if(1&o&&(e.TgZ(0,"techpromux-ui-dynamic-forms-default",0,1),e.NdJ("formGroupCreated",function(r){return n.onFormGroupCreated(r)})("formModelUpdated",function(r){return n.onFormModelUpdated(r)}),e.qZA(),e.YNc(2,lt,1,0,"ng-template",null,2,e.W1O),e.YNc(4,rt,1,0,"ng-template",null,3,e.W1O),e.YNc(6,ct,1,0,"ng-template",null,4,e.W1O)),2&o){const i=e.MAs(3),r=e.MAs(5),c=e.MAs(7);e.Q6J("formModel",n.formModel)("formLayout",n.formLayout)("keepFormValuesOnChanges",!0)("markAllAsReadOnly",!n.editable)("showDefaultErrorsTpl",!0)("defaultFormArrayEndTplLayout",n.defaultFormArrayEndTplLayout)("useCustomArrayBtnTranslationsPrefix",!0)("customModelControlsTpl",e.kEZ(14,pt,e.VKq(8,dt,r),e.VKq(10,_t,c),e.VKq(12,ut,i)))}},dependencies:[k.bV],styles:[".spaces_form_modules_sub_form_mechanisms_array_host{width:calc(100% - 20px);border:2px solid #c8c8c8}"]})}return a})();function ht(a,_){1&a&&e._UZ(0,"hr",8)}function ft(a,_){1&a&&e._UZ(0,"hr",9)}function gt(a,_){1&a&&e._UZ(0,"div",10)}function bt(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"div",13)(1,"button",14),e.NdJ("click",function(n){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onDeleteSpaceItem(n))}),e.O4$(),e._UZ(2,"svg",15),e._uU(3),e.ALo(4,"translate"),e.qZA()()}2&a&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"app.projects.ui.form.spaces.delete.button")," "))}function wt(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"div",16)(1,"button",17),e.NdJ("click",function(n){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onDeleteSpaceItem(n))}),e.O4$(),e._UZ(2,"svg",15),e._uU(3),e.ALo(4,"translate"),e.qZA()()}2&a&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"app.projects.ui.form.spaces.delete.button")," "))}function vt(a,_){if(1&a&&(e.YNc(0,bt,5,3,"div",11),e.YNc(1,wt,5,3,"div",12)),2&a){const t=e.oxw();e.Q6J("ngIf",t.editable),e.xp6(1),e.Q6J("ngIf",t.editable)}}function xt(a,_){if(1&a&&(e.TgZ(0,"div",19),e._UZ(1,"techpromux-ui-photos-gallery",20),e.ALo(2,"translate"),e.qZA()),2&a){const t=e.oxw(),o=t.group,n=t.context,i=e.oxw();e.xp6(1),e.Q6J("editable",i.editable)("imageStoreBasePath",i.imageStoreBasePath)("id",i.getPhotosGalleryIdByGroup(o,n))("group",o)("context",n)("header",e.lcZ(2,6,"app.projects.ui.form.spaces.photo_gallery.photos"))}}function Tt(a,_){if(1&a&&e.YNc(0,xt,3,8,"div",18),2&a){const t=_.group,o=_.context,n=e.oxw();e.Q6J("ngIf",n.isItemsChangeChecked(t,o))}}function yt(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"app-projects-ui-module-item-form",21),e.NdJ("formGroupCreated",function(n){const r=e.CHM(t).index,c=e.oxw();return e.KtG(c.onModuleFormGroupCreated(n,r))}),e.qZA()}if(2&a){const t=_.group,o=_.index,n=_.context,i=e.oxw();e.Q6J("editable",i.editable)("optionsLists",i.optionsLists)("context",n)("group",t)("index",o)}}const Ct=function(a){return{modelId:"space_type_id",template:a,align:"END"}},At=function(a){return{modelId:"$$__hr",template:a,align:"END"}},Ft=function(a){return{modelId:"walls",template:a,align:"START"}},St=function(a){return{modelId:"doors",template:a,align:"START"}},jt=function(a){return{modelId:"doors",template:a,align:"PRE_END"}},Nt=function(a){return{modelId:"windows",template:a,align:"START"}},Et=function(a){return{modelId:"windows",template:a,align:"PRE_END"}},It=function(a){return{modelId:"modules",template:a,align:"START"}},Jt=function(a){return{modelId:"modules",template:a,align:"PRE_END"}},Zt=function(a,_,t,o,n,i,r,c,l){return[a,_,t,o,n,i,r,c,l]};let Ze=(()=>{class a extends fe{constructor(){super(),this.fileUploader=(0,e.f3M)(ce.$v),this.imageStoreBasePath=this.fileUploader.getImageStoreBasePath()}getDefaultOptionsKeys(){return["spaces_types__all","products_types__all","products_categories__frames","products_categories__electrical_mechanisms","products_doors__all","products_windows__all","products_blinds__all","products_electrical_mechanisms__frames","labours__doors","labours__blinds","labours__windows","labours__frames","labours__electrical_mechanisms"]}getDefaultOptionsLists(){return{walls_identifiers$:new re.X([]),doors_opening_directions$:new re.X([]),modules_trenches_directions$:new re.X([])}}getFormModel(t=!0){return[new d.nMt({id:"space_type_id",value:this.initialData?.space_type_id,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.space_type"),disabled:!t,options:this.optionsLists.spaces_types__all$.asObservable(),additional:{translate_label:!0}}),new d.b1u({id:"id",value:this.initialData?.id,required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"space_floor_area",value:this.initialData?.space_floor_area,required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"space_ceiling_area",value:this.initialData?.space_ceiling_area,required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"$$__hr",value:"",required:!1,inputType:"hidden"}),new d.RRz({id:"walls",label:this.translatePipe.transform((0,m.J)("app.projects.ui.form.spaces.walls.header")),initialCount:this.initialData?.walls&&this.initialData?.walls?.length>0?this.initialData?.walls?.length:4,groupFactory:()=>[new d.b1u({id:"wall_area",value:0,required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"wall_identifier",label:(0,m.J)("app.projects.ui.form.spaces.walls.identifier"),required:!0,readOnly:!0,disabled:!0,additional:{translate_label:!0}}),new d.b1u({id:"wall_width",inputType:"number",value:3e3,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.walls.width"),readOnly:!t,disabled:!t,validators:{required:null,min:1},additional:{translate_label:!0}}),new d.b1u({id:"wall_height",inputType:"number",value:2500,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.walls.height"),readOnly:!t,disabled:!t,validators:{required:null,min:1},additional:{translate_label:!0}}),new d.b1u({id:"wall_angle",inputType:"number",value:90,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.walls.angle"),readOnly:!t,disabled:!t,validators:{required:null,min:0,max:360},additional:{translate_label:!0}})]},{element:{host:"",container:"",children:""},grid:{host:"",container:"",children:""}}),new d.b1u({id:"$$__hr",value:"",required:!1,inputType:"hidden"}),new d.RRz({id:"doors",label:this.translatePipe.transform((0,m.J)("app.projects.ui.form.spaces.doors.header")),initialCount:this.initialData?.doors&&this.initialData?.doors?.length>0?this.initialData?.doors?.length:1,groupFactory:()=>[new d.b1u({id:"door_area",value:0,required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.nMt({id:"door_wall_identifier",value:"A - B",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.doors.wall"),disabled:!t,options:this.optionsLists.walls_identifiers$.asObservable(),additional:{translate_label:!0}}),new d.nMt({id:"door_opening_direction",value:"NONE_NONE",required:!1,label:(0,m.J)("app.projects.ui.form.spaces.doors.opening_direction"),disabled:!t,options:this.optionsLists.doors_opening_directions$.asObservable(),additional:{translate_label:!0}}),new d.b1u({id:"door_width",inputType:"number",value:1e3,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.doors.width"),readOnly:!t,disabled:!t,validators:{required:null,min:1},additional:{translate_label:!0}}),new d.b1u({id:"door_height",inputType:"number",value:2e3,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.doors.height"),readOnly:!t,disabled:!t,validators:{required:null,min:1},additional:{translate_label:!0}}),new d.b1u({id:"door_wall_depth",inputType:"number",value:200,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.doors.wall_depth"),readOnly:!t,disabled:!t,validators:{required:null,min:1},additional:{translate_label:!0}}),new d.b1u({id:"door_left_width",inputType:"number",value:1e3,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.doors.left_width"),readOnly:!t,disabled:!t,validators:{required:null,min:0},additional:{translate_label:!0}}),new d.dwp({id:"door_change",value:!1,label:(0,m.J)("app.projects.ui.form.spaces.doors.door_change"),disabled:!t,additional:{translate_label:!0}}),new d.nMt({id:"door_new_id",value:"",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.doors.door_new_id"),disabled:!t,options:this.optionsLists.products_doors__all$.asObservable(),additional:{translate_label:!0,use_ng_select:!0,use_ng_select__clearable:!1},relations:[{match:d._Vz,operator:d.JHc,when:[{id:"door_change",value:!0}]},{match:d.RFZ,operator:d.JHc,when:[{id:"door_change",value:!0}]}]}),new d.b1u({id:"door_new_price",value:"0.00",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.doors.door_new_price"),readOnly:!t,disabled:!t,additional:{translate_label:!0,onblur_parse_value_to_float_with_fixed:2},validators:{min:0},relations:[{match:d._Vz,operator:d.JHc,when:[{id:"door_change",value:!0}]},{match:d.RFZ,operator:d.JHc,when:[{id:"door_change",value:!0}]}]}),new d.b1u({id:"door_new_iva_percent",value:"0.00",required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.nMt({id:"door_labour_id",value:"",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.doors.door_labour_id"),disabled:!t,options:this.optionsLists.labours__doors$.asObservable(),additional:{translate_label:!0},relations:[{match:d._Vz,operator:d.JHc,when:[{id:"door_change",value:!0}]},{match:d.RFZ,operator:d.JHc,when:[{id:"door_change",value:!0}]}]}),new d.b1u({id:"door_labour_price",value:"0.00",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.doors.door_labour_price"),readOnly:!t,disabled:!t,additional:{translate_label:!0,onblur_parse_value_to_float_with_fixed:2},validators:{min:0},relations:[{match:d._Vz,operator:d.JHc,when:[{id:"door_change",value:!0}]},{match:d.RFZ,operator:d.JHc,when:[{id:"door_change",value:!0}]}]}),new d.b1u({id:"door_labour_iva_percent",value:"0.00",required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"door_photos_gallery",value:[],inputType:"hidden",readOnly:!t,disabled:!t,relations:[{match:d._Vz,operator:d.JHc,when:[{id:"door_change",value:!0}]}]})]},{element:{host:"",container:"",children:""},grid:{host:"",container:"",children:""}}),new d.b1u({id:"$$__hr",value:"",required:!1,inputType:"hidden"}),new d.dwp({id:"window_has_window",value:!1,label:(0,m.J)("app.projects.ui.form.spaces.windows.window_has_window"),disabled:!t,additional:{translate_label:!0}}),new d.b1u({id:"$$__hr",value:"",inputType:"hidden",readOnly:!t,disabled:!t,relations:[{match:d._Vz,operator:d.JHc,when:[{id:"window_has_window",value:!0}]}]}),new d.RRz({id:"windows",label:this.translatePipe.transform((0,m.J)("app.projects.ui.form.spaces.windows.header")),initialCount:this.initialData?.windows&&this.initialData?.windows?.length>0?this.initialData?.windows?.length:1,relations:[{match:d._Vz,operator:d.JHc,when:[{id:"window_has_window",value:!0}]},{match:d.i_9,operator:d.JHc,when:[{id:"window_has_window",value:!1}]}],groupFactory:()=>[new d.b1u({id:"window_area",value:0,required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.nMt({id:"window_wall_identifier",value:"B - C",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.windows.wall"),disabled:!t,options:this.optionsLists.walls_identifiers$.asObservable(),additional:{translate_label:!0}}),new d.b1u({id:"window_width",inputType:"number",value:1e3,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.windows.width"),readOnly:!t,disabled:!t,validators:{required:null,min:1},additional:{translate_label:!0}}),new d.b1u({id:"window_height",inputType:"number",value:1e3,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.windows.height"),readOnly:!t,disabled:!t,validators:{required:null,min:1},additional:{translate_label:!0}}),new d.b1u({id:"window_wall_depth",inputType:"number",value:200,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.windows.wall_depth"),readOnly:!t,disabled:!t,validators:{required:null,min:1},additional:{translate_label:!0}}),new d.b1u({id:"window_left_width",inputType:"number",value:1e3,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.windows.left_width"),readOnly:!t,disabled:!t,validators:{required:null,min:0},additional:{translate_label:!0}}),new d.b1u({id:"window_under_height",inputType:"number",value:1e3,required:!0,label:(0,m.J)("app.projects.ui.form.spaces.windows.under_height"),readOnly:!t,disabled:!t,validators:{required:null,min:0},additional:{translate_label:!0}}),new d.dwp({id:"window_change",value:!1,label:(0,m.J)("app.projects.ui.form.spaces.windows.window_change"),disabled:!t,additional:{translate_label:!0}}),new d.dwp({id:"window_blind_has_blind",value:!1,label:(0,m.J)("app.projects.ui.form.spaces.windows.has_blind"),disabled:!t,additional:{translate_label:!0}}),new d.dwp({id:"window_blind_is_motorized",value:!1,label:(0,m.J)("app.projects.ui.form.spaces.windows.has_motorized_blind"),disabled:!t,additional:{translate_label:!0},relations:[{match:d._Vz,operator:d.JHc,when:[{id:"window_blind_has_blind",value:!0}]}]}),new d.dwp({id:"window_blind_change",value:!1,label:(0,m.J)("app.projects.ui.form.spaces.windows.blind_change"),disabled:!t,additional:{translate_label:!0},relations:[{match:d._Vz,operator:d.JHc,when:[{id:"window_blind_has_blind",value:!0}]}]}),new d.nMt({id:"window_new_id",value:"",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.windows.window_new_id"),disabled:!t,options:this.optionsLists.products_windows__all$.asObservable(),additional:{translate_label:!0,use_ng_select:!0,use_ng_select__clearable:!1},relations:[{match:d._Vz,operator:d.JHc,when:[{id:"window_change",value:!0}]},{match:d.RFZ,operator:d.JHc,when:[{id:"window_change",value:!0}]}]}),new d.b1u({id:"window_new_price",value:"0.00",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.windows.window_new_price"),readOnly:!t,disabled:!t,additional:{translate_label:!0,onblur_parse_value_to_float_with_fixed:2},validators:{min:0},relations:[{match:d._Vz,operator:d.JHc,when:[{id:"window_change",value:!0}]},{match:d.RFZ,operator:d.JHc,when:[{id:"window_change",value:!0}]}]}),new d.b1u({id:"window_new_iva_percent",value:"0.00",required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.nMt({id:"window_labour_id",value:"",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.windows.window_labour_id"),disabled:!t,options:this.optionsLists.labours__windows$.asObservable(),additional:{translate_label:!0},relations:[{match:d._Vz,operator:d.JHc,when:[{id:"window_change",value:!0}]},{match:d.RFZ,operator:d.JHc,when:[{id:"window_change",value:!0}]}]}),new d.b1u({id:"window_labour_price",value:"0.00",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.windows.window_labour_price"),readOnly:!t,disabled:!t,additional:{translate_label:!0,onblur_parse_value_to_float_with_fixed:2},validators:{min:0},relations:[{match:d._Vz,operator:d.JHc,when:[{id:"window_change",value:!0}]},{match:d.RFZ,operator:d.JHc,when:[{id:"window_change",value:!0}]}]}),new d.b1u({id:"window_labour_iva_percent",value:"0.00",required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.nMt({id:"window_blind_new_id",value:"",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.windows.blind_new_id"),disabled:!t,options:this.optionsLists.products_blinds__all$.asObservable(),additional:{translate_label:!0,use_ng_select:!0,use_ng_select__clearable:!1},relations:[{match:d._Vz,operator:d.JHc,when:[{id:"window_blind_change",value:!0}]},{match:d.RFZ,operator:d.JHc,when:[{id:"window_blind_change",value:!0}]}]}),new d.b1u({id:"window_blind_new_price",value:"0.00",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.windows.blind_new_price"),readOnly:!t,disabled:!t,additional:{translate_label:!0,onblur_parse_value_to_float_with_fixed:2},validators:{min:0},relations:[{match:d._Vz,operator:d.JHc,when:[{id:"window_blind_change",value:!0}]},{match:d.RFZ,operator:d.JHc,when:[{id:"window_blind_change",value:!0}]}]}),new d.b1u({id:"window_blind_new_iva_percent",value:"0.00",required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.nMt({id:"window_blind_labour_id",value:"",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.windows.blind_labour_id"),disabled:!t,options:this.optionsLists.labours__blinds$.asObservable(),additional:{translate_label:!0},relations:[{match:d._Vz,operator:d.JHc,when:[{id:"window_blind_change",value:!0}]},{match:d.RFZ,operator:d.JHc,when:[{id:"window_blind_change",value:!0}]}]}),new d.b1u({id:"window_blind_labour_price",value:"0.00",required:!0,label:(0,m.J)("app.projects.ui.form.spaces.windows.blind_labour_price"),readOnly:!t,disabled:!t,additional:{translate_label:!0,onblur_parse_value_to_float_with_fixed:2},validators:{min:0},relations:[{match:d._Vz,operator:d.JHc,when:[{id:"window_blind_change",value:!0}]},{match:d.RFZ,operator:d.JHc,when:[{id:"window_blind_change",value:!0}]}]}),new d.b1u({id:"window_blind_labour_iva_percent",value:"0.00",required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"window_photos_gallery",value:[],inputType:"hidden",readOnly:!t,disabled:!t,relations:[{match:d._Vz,operator:d.F8e,when:[{id:"window_change",value:!0},{id:"window_blind_change",value:!0}]}]})]},{element:{host:"",container:"",children:""},grid:{host:"",container:"",children:""}}),new d.b1u({id:"$$__hr",value:"",required:!1,inputType:"hidden"}),new d.RRz({id:"modules",label:this.translatePipe.transform((0,m.J)("app.projects.ui.form.spaces.modules.header")),initialCount:this.initialData?.modules&&this.initialData?.modules?.length>0?this.initialData?.modules?.length:1,relations:[],groupFactory:()=>[new d.b1u({id:"module_wall_identifier",value:"A - B",required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"module_keep_existing_installation",value:1,required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"module_make_new_installation",value:0,required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"module_reference_point",value:"A",required:!1,inputType:"hidden",readOnly:!t,disabled:!t,validators:{required:null,min:0}}),new d.b1u({id:"module_distance_to_reference_point",value:500,required:!1,inputType:"hidden",readOnly:!t,disabled:!t,validators:{required:null,min:0}}),new d.b1u({id:"module_bottom_height",value:500,required:!1,inputType:"hidden",readOnly:!t,disabled:!t,validators:{required:null,min:0}}),new d.b1u({id:"module_trenches_count",value:1,required:!1,inputType:"hidden",readOnly:!t,disabled:!t,validators:{required:null,min:1}}),new d.b1u({id:"module_trenches_direction",value:"",required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"mechanisms",value:[],required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"module_frame_new_id",value:"",required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"module_frame_new_price",value:"0.00",required:!1,inputType:"hidden",readOnly:!t,disabled:!t,validators:{required:null,min:0}}),new d.b1u({id:"module_frame_new_iva_percent",value:"0.00",required:!1,inputType:"hidden",readOnly:!t,disabled:!t}),new d.b1u({id:"module_frame_installation_price",value:"0.00",required:!1,inputType:"hidden",readOnly:!t,disabled:!t,validators:{required:null,min:0}}),new d.b1u({id:"module_frame_installation_iva_percent",value:"0.00",required:!1,inputType:"hidden",readOnly:!t,disabled:!t})]},{element:{host:"",container:"",children:""},grid:{host:"",container:"",children:""}}),new d.b1u({id:"$$__hr",value:"",required:!1,inputType:"hidden"})]}getFormLayout(t=!0){return{$$__hr:{element:{host:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"},grid:{host:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"}},$$__br:{element:{host:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"},grid:{host:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"}},space_floor_area:{element:{host:"d-none"},grid:{host:"d-none"}},space_ceiling_area:{element:{host:"d-none"},grid:{host:"d-none"}},space_type_id:{element:{host:"col-xl-4 col-lg-4 col-md-4 col-sm-8 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-4 col-lg-4 col-md-4 col-sm-8 col-xs-12",label:t?"input-required":""}},wall_area:{element:{host:"d-none"},grid:{host:"d-none"}},wall_identifier:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},wall_width:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},wall_height:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},wall_angle:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},door_area:{element:{host:"d-none"},grid:{host:"d-none"}},door_wall_identifier:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},door_opening_direction:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},door_width:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},door_height:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},door_left_width:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},door_wall_depth:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},door_change:{element:{host:"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-xs-12 pt-3 pb-1",label:""},grid:{host:"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-xs-12 pt-3 pb-1",label:""}},door_new_id:{element:{host:"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-xs-12",label:t?"input-required":""}},door_new_price:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},door_new_iva_percent:{element:{host:"d-none"},grid:{host:"d-none"}},door_labour_id:{element:{host:"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-xs-12",label:t?"input-required":""}},door_labour_price:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},door_labour_iva_percent:{element:{host:"d-none"},grid:{host:"d-none"}},window_has_window:{element:{host:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 pt-1",label:""},grid:{host:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 pt-1",label:""}},window_area:{element:{host:"d-none"},grid:{host:"d-none"}},window_wall_identifier:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},window_width:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},window_height:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},window_left_width:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},window_wall_depth:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},window_under_height:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},window_change:{element:{host:"col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-12 pt-3 pb-1",label:""},grid:{host:"col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-12 pt-3 pb-1",label:""}},window_blind_has_blind:{element:{host:"col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-12 pt-3 pb-1",label:""},grid:{host:"col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-12 pt-3 pb-1",label:""}},window_blind_is_motorized:{element:{host:"col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-12 pt-3 pb-1",label:""},grid:{host:"col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-12 pt-3 pb-1",label:""}},window_blind_change:{element:{host:"col-xl-3 col-lg-3 col-md-5 col-sm-6 col-xs-12 pt-3 pb-1",label:""},grid:{host:"col-xl-3 col-lg-3 col-md-5 col-sm-6 col-xs-12 pt-3 pb-1",label:""}},window_new_id:{element:{host:"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-xs-12",label:t?"input-required":""}},window_new_price:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},window_new_iva_percent:{element:{host:"d-none"},grid:{host:"d-none"}},window_labour_id:{element:{host:"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-xs-12",label:t?"input-required":""}},window_labour_price:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},window_labour_iva_percent:{element:{host:"d-none"},grid:{host:"d-none"}},window_blind_new_id:{element:{host:"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-xs-12",label:t?"input-required":""}},window_blind_new_price:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},window_blind_new_iva_percent:{element:{host:"d-none"},grid:{host:"d-none"}},window_blind_labour_id:{element:{host:"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-8 col-lg-8 col-md-8 col-sm-8 col-xs-12",label:t?"input-required":""}},window_blind_labour_price:{element:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""},grid:{host:"col-xl-2 col-lg-2 col-md-4 col-sm-4 col-xs-12",label:t?"input-required":""}},window_blind_labour_iva_percent:{element:{host:"d-none"},grid:{host:"d-none"}}}}getOptionsListsData(t=!0){const o={};return this.optionsLists.doors_opening_directions$.next([{value:"NONE_NONE",label:this.translatePipe.transform((0,m.J)("app.projects.ui.form.spaces.doors.opening_none"))},{value:"IN_LEFT",label:this.translatePipe.transform((0,m.J)("app.projects.ui.form.spaces.doors.opening_in_left"))},{value:"IN_RIGHT",label:this.translatePipe.transform((0,m.J)("app.projects.ui.form.spaces.doors.opening_in_right"))},{value:"OUT_LEFT",label:this.translatePipe.transform((0,m.J)("app.projects.ui.form.spaces.doors.opening_out_left"))},{value:"OUT_RIGHT",label:this.translatePipe.transform((0,m.J)("app.projects.ui.form.spaces.doors.opening_out_right"))}]),this.optionsLists.modules_trenches_directions$.next([{value:"NONE",label:this.translatePipe.transform((0,m.J)("app.projects.ui.form.spaces.modules.trenches_direction_none"))},{value:"LEFT",label:this.translatePipe.transform((0,m.J)("app.projects.ui.form.spaces.modules.trenches_direction_left"))},{value:"RIGHT",label:this.translatePipe.transform((0,m.J)("app.projects.ui.form.spaces.modules.trenches_direction_right"))}]),this.optionsKeys.forEach(n=>{o[n+"$"]=new re.X([]),this.startLoader("Add-Edit-Space-Form-Options-"+n)}),this.optionsListsService.getOptionsLists(this.optionsKeys,{orderByLabel:!0}).results?.forEach(n=>{this.addSubscription(n.options$.pipe((0,G.q)(1)).subscribe(i=>{o[n.fullKey+"$"].next([{label:"",value:"",item:{}},...i]),this.endLoader("Add-Edit-Space-Form-Options-"+n.fullKey)}))}),o}onFormGroupCreated(t){const o=t;o.patchValue(this.initialData,{emitEvent:!1});const n=o.get("walls");this.addSubscription(n.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{n.controls.forEach((c,l)=>{const s=c.get("wall_identifier");if(s){const u=String.fromCharCode("A".charCodeAt(0)+l)+" - "+String.fromCharCode("A".charCodeAt(0)+(l<n.controls.length-1?l+1:0));s.setValue(u,{emitEvent:!1})}})})),this.addSubscription(n.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{const c=n.controls.length,l=[];for(let s=0;s<c;s++){const u=String.fromCharCode("A".charCodeAt(0)+s)+" - "+String.fromCharCode("A".charCodeAt(0)+(s<n.controls.length-1?s+1:0));l.push({label:u,value:u})}this.optionsLists.walls_identifiers$.next(l)}));const i=o.get("doors");this.addSubscription(i.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{const c=i.controls.length;for(let l=0;l<c;l++){const s=i.controls[l],u=s.get("door_change"),h=s.get("door_new_id"),v=s.get("door_new_price"),T=s.get("door_new_iva_percent"),p=s.get("door_labour_id"),g=s.get("door_labour_price"),b=s.get("door_labour_iva_percent"),f=s.get("door_photos_gallery");h.$$__hasValueChangesEventSubscription||(h.$$__hasValueChangesEventSubscription=!0,this.addSubscription(h.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{if(!this.editable||!h.dirty)return;const w=h.value,I=this.optionsLists.products_doors__all$.getValue().find(J=>J.value===w),F=Number.parseFloat(I?.item?.price);v.setValue(Number.isNaN(F)?"0.00":F.toFixed(2));const y=Number.parseFloat(I?.item?.iva_percent);T.setValue(Number.isNaN(y)?"0.00":y.toFixed(2))}))),p.$$__hasValueChangesEventSubscription||(p.$$__hasValueChangesEventSubscription=!0,this.addSubscription(p.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{if(!this.editable||!p.dirty)return;const w=p.value,I=this.optionsLists.labours__doors$.getValue().find(J=>J.value===w),F=Number.parseFloat(I?.item?.price);g.setValue(Number.isNaN(F)?"0.00":F.toFixed(2));const y=Number.parseFloat(I?.item?.iva_percent);b.setValue(Number.isNaN(y)?"0.00":y.toFixed(2))}))),u.$$__hasValueChangesEventSubscription||(u.$$__hasValueChangesEventSubscription=!0,this.addSubscription(u.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{!0!==u.value&&(h.setValue(null),v.setValue("0.00"),p.setValue(null),g.setValue("0.00"),f.setValue([]))})),setTimeout(()=>{u.setValue(u.value)},100))}}));const r=o.get("windows");this.addSubscription(r.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{const c=r.controls.length;for(let l=0;l<c;l++){const s=r.controls[l],u=s.get("window_change"),h=s.get("window_new_id"),v=s.get("window_new_price"),T=s.get("window_new_iva_percent"),p=s.get("window_labour_id"),g=s.get("window_labour_price"),b=s.get("window_labour_iva_percent"),f=s.get("window_blind_has_blind"),w=s.get("window_blind_change"),x=s.get("window_blind_new_id"),I=s.get("window_blind_new_price"),F=s.get("window_blind_new_iva_percent"),y=s.get("window_blind_labour_id"),J=s.get("window_blind_labour_price"),j=s.get("window_blind_labour_iva_percent"),A=s.get("window_photos_gallery");h.$$__hasValueChangesEventSubscription||(h.$$__hasValueChangesEventSubscription=!0,this.addSubscription(h.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{if(!this.editable||!h.dirty)return;const C=h.value,N=this.optionsLists.products_windows__all$.getValue().find(B=>B.value===C),M=Number.parseFloat(N?.item?.price);v.setValue(Number.isNaN(M)?"0.00":M.toFixed(2));const V=Number.parseFloat(N?.item?.iva_percent);T.setValue(Number.isNaN(V)?"0.00":V.toFixed(2))}))),p.$$__hasValueChangesEventSubscription||(p.$$__hasValueChangesEventSubscription=!0,this.addSubscription(p.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{if(!this.editable||!p.dirty)return;const C=p.value,N=this.optionsLists.labours__windows$.getValue().find(B=>B.value===C),M=Number.parseFloat(N?.item?.price);g.setValue(Number.isNaN(M)?"0.00":M.toFixed(2));const V=Number.parseFloat(N?.item?.iva_percent);b.setValue(Number.isNaN(V)?"0.00":V.toFixed(2))}))),u.$$__hasValueChangesEventSubscription||(u.$$__hasValueChangesEventSubscription=!0,this.addSubscription(u.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{!0!==u.value&&(h.setValue(null),v.setValue("0.00"),p.setValue(null),g.setValue("0.00")),!0!==u.value&&!0!==w.value&&A.setValue([])})),setTimeout(()=>{u.setValue(u.value)},100)),f.$$__hasValueChangesEventSubscription||(f.$$__hasValueChangesEventSubscription=!0,this.addSubscription(f.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{!0!==f.value&&(s.get("window_blind_is_motorized").setValue(!1),s.get("window_blind_change").setValue(!1))})),setTimeout(()=>{f.setValue(f.value)},100)),x.$$__hasValueChangesEventSubscription||(x.$$__hasValueChangesEventSubscription=!0,this.addSubscription(x.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{if(!this.editable||!x.dirty)return;const C=x.value,N=this.optionsLists.products_blinds__all$.getValue().find(B=>B.value===C),M=Number.parseFloat(N?.item?.price);I.setValue(Number.isNaN(M)?"0.00":M.toFixed(2));const V=Number.parseFloat(N?.item?.iva_percent);F.setValue(Number.isNaN(V)?"0.00":V.toFixed(2))}))),y.$$__hasValueChangesEventSubscription||(y.$$__hasValueChangesEventSubscription=!0,this.addSubscription(y.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{if(!this.editable||!y.dirty)return;const C=y.value,N=this.optionsLists.labours__blinds$.getValue().find(B=>B.value===C),M=Number.parseFloat(N?.item?.price);J.setValue(Number.isNaN(M)?"0.00":M.toFixed(2));const V=Number.parseFloat(N?.item?.iva_percent);j.setValue(Number.isNaN(V)?"0.00":V.toFixed(2))}))),w.$$__hasValueChangesEventSubscription||(w.$$__hasValueChangesEventSubscription=!0,this.addSubscription(w.valueChanges.pipe((0,D.b)(200),(0,q.x)()).subscribe(()=>{!0!==w.value&&(x.setValue(null),I.setValue("0.00"),y.setValue(null),J.setValue("0.00")),!0!==u.value&&!0!==w.value&&A.setValue([])})),setTimeout(()=>{w.setValue(w.value)},100))}})),this.formGroup=t,this.formGroupCreated.emit(t)}onDeleteSpaceItem(t){this.deleteItem.emit(t)}onModuleFormGroupCreated(t,o){this.formGroup&&this.formGroup.get("modules")&&this.formGroup.get("modules").controls&&this.formGroup.get("modules").controls[o]&&(this.formGroup.get("modules").controls[o].$$__embedded=t)}isItemsChangeChecked(t,o){let i=null,r=null,c=null;switch(o.id){case"doors":return i=t.find(l=>"door_change"===l.id),!!i&&!!i?.value;case"windows":return r=t.find(l=>"window_change"===l.id),c=t.find(l=>"window_blind_change"===l.id),!(!r&&!c||!r?.value&&!c?.value);case"modules":return!1}return!1}getPhotosGalleryIdByGroup(t,o){switch(o.id){case"doors":return"door_photos_gallery";case"windows":return"window_photos_gallery";case"modules":return"module_photos_gallery";default:return"photos_gallery"}}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-projects-ui-space-form"]],features:[e.qOj],decls:14,vars:35,consts:[[3,"formModel","formLayout","keepFormValuesOnChanges","markAllAsReadOnly","defaultFormArrayEndTplLayout","useCustomArrayBtnTranslationsPrefix","customModelControlsTpl","formGroupCreated","formModelUpdated"],["dynamicFormsComponent",""],["separator1HrTpl",""],["separator2HrTpl",""],["newLine1HrTpl",""],["newLineRemoveHrTpl",""],["photoGalleryTpl",""],["moduleItemFormTpl",""],[1,"",2,"width","100%","border","2px solid #0f0f0f","opacity","0.3"],[1,"mt-3","mb-2","m-auto",2,"width","calc(100% - 20px)","border","1px solid #0f0f0f"],[1,"col-xs-12","mb-2","m-auto"],["class","col-xs-12","style","height: 0px",4,"ngIf"],["class","col-xs-12 d-sm-none mt-2 d-flex justify-content-end text-right",4,"ngIf"],[1,"col-xs-12",2,"height","0px"],["type","button","cButton","","color","danger","variant","outline",1,"d-none","d-sm-block",2,"position","relative","top","-38px","left","calc(100% + 20px)",3,"click"],["cIcon","","name","cil-trash","width","16","size","sm"],[1,"col-xs-12","d-sm-none","mt-2","d-flex","justify-content-end","text-right"],["cButton","","color","danger","variant","outline","type","button",1,"",3,"click"],["class","col-xl-9 col-lg-9 col-md-8 col-sm-8 col-xs-12",4,"ngIf"],[1,"col-xl-9","col-lg-9","col-md-8","col-sm-8","col-xs-12"],[3,"editable","imageStoreBasePath","id","group","context","header"],[3,"editable","optionsLists","context","group","index","formGroupCreated"]],template:function(o,n){if(1&o&&(e.TgZ(0,"techpromux-ui-dynamic-forms-default",0,1),e.NdJ("formGroupCreated",function(r){return n.onFormGroupCreated(r)})("formModelUpdated",function(r){return n.onFormModelUpdated(r)}),e.qZA(),e.YNc(2,ht,1,0,"ng-template",null,2,e.W1O),e.YNc(4,ft,1,0,"ng-template",null,3,e.W1O),e.YNc(6,gt,1,0,"ng-template",null,4,e.W1O),e.YNc(8,vt,2,2,"ng-template",null,5,e.W1O),e.YNc(10,Tt,1,1,"ng-template",null,6,e.W1O),e.YNc(12,yt,1,5,"ng-template",null,7,e.W1O)),2&o){const i=e.MAs(3),r=e.MAs(5),c=e.MAs(9),l=e.MAs(11),s=e.MAs(13);e.Q6J("formModel",n.formModel)("formLayout",n.formLayout)("keepFormValuesOnChanges",!0)("markAllAsReadOnly",!n.editable)("defaultFormArrayEndTplLayout",n.defaultFormArrayEndTplLayout)("useCustomArrayBtnTranslationsPrefix",!0)("customModelControlsTpl",e.rFY(25,Zt,[e.VKq(7,Ct,c),e.VKq(9,At,i),e.VKq(11,Ft,r),e.VKq(13,St,r),e.VKq(15,jt,l),e.VKq(17,Nt,r),e.VKq(19,Et,l),e.VKq(21,It,r),e.VKq(23,Jt,s)]))}},dependencies:[O.O5,Z.Hq3,ne.ar,k.ef,k.bV,mt,te.X$],changeDetection:0})}return a})();function Mt(a,_){1&a&&(e.ynx(0),e.O4$(),e._UZ(1,"svg",10),e._uU(2),e.ALo(3,"translate"),e.BQk()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"app.projects.feature.add.button.step1")," "))}function Dt(a,_){1&a&&(e.ynx(0),e.O4$(),e._UZ(1,"svg",11),e._uU(2),e.ALo(3,"translate"),e.BQk()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"app.projects.feature.add.button.step2")," "))}function qt(a,_){1&a&&(e.ynx(0),e.O4$(),e._UZ(1,"svg",12),e._uU(2),e.ALo(3,"translate"),e.BQk()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"app.projects.feature.add.button.step3")," "))}function kt(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onActivateProjectTabX(0))}),e.O4$(),e._UZ(1,"svg",26),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){e.oxw();const t=e.MAs(9),o=e.oxw();e.Q6J("cTabContent",t)("tabPaneIdx",0)("disabled",o.isDisabledTab_GENERAL_DATA())("active",0===o.formTabActive)("cTextColor",o.isProjectFormGroupValid()?"":"danger"),e.xp6(2),e.hij(" ",e.lcZ(3,6,"app.projects.feature.add.tab_general.header")," ")}}function Lt(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onActivateProjectTabX(1))}),e.O4$(),e._UZ(1,"svg",27),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){e.oxw();const t=e.MAs(9),o=e.oxw();e.Q6J("cTabContent",t)("tabPaneIdx",1)("disabled",o.isDisabledTab_SPACES())("active",1===o.formTabActive)("cTextColor",o.isSpacesFormArrayValid()?"":"danger"),e.xp6(2),e.AsE(" ",e.lcZ(3,7,"app.projects.feature.add.tab_spaces.header")," (",o.spacesFormsData.length,") ")}}function Ot(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onActivateProjectTabX(4))}),e.O4$(),e._UZ(1,"svg",29),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){e.oxw();const t=e.MAs(9),o=e.oxw();e.Q6J("cTabContent",t)("tabPaneIdx",4)("disabled",o.isDisabledTab_DETAILS())("active",4===o.formTabActive),e.xp6(2),e.hij(" ",e.lcZ(3,5,"app.projects.feature.add.tab_details.header")," ")}}function Pt(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onActivateProjectTabX(5))}),e.O4$(),e._UZ(1,"svg",30),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){e.oxw();const t=e.MAs(9),o=e.oxw();e.Q6J("cTabContent",t)("tabPaneIdx",5)("disabled",o.isDisabledTab_BUDGET())("active",5===o.formTabActive),e.xp6(2),e.hij(" ",e.lcZ(3,5,"app.projects.feature.add.tab_budget.header")," ")}}function $t(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"app-projects-ui-general-form",31),e.NdJ("formGroupCreated",function(n){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onProjectFormGroupCreated(n))}),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("editable",!0)("initialData",t.projectFormData)}}function Vt(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"app-projects-ui-general-form",31),e.NdJ("formGroupCreated",function(n){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onProjectFormGroupCreated(n))}),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("editable",!1)("initialData",t.projectFormData)}}function Ut(a,_){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",32),e.NdJ("click",function(){const i=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.onActivateSpaceTabX(i))}),e.O4$(),e._UZ(2,"svg",33),e._uU(3),e.ALo(4,"async"),e.ALo(5,"optionItemLabel"),e.ALo(6,"translate"),e.qZA(),e.BQk()}if(2&a){const t=_.index;e.oxw();const o=e.MAs(18),n=e.oxw();let i,r;e.xp6(1),e.Q6J("cTabContent",o)("tabPaneIdx",t)("cTextColor",n.isSpaceFormGroupValid(t)?"":"danger")("active",n.spaceTabActive===t),e.xp6(2),e.AsE(" # ",t+1," - ",null!=(i=n.formGroup.get("spaces"))&&null!=i.controls[t]&&null!=(r=i.controls[t].get("space_type_id"))&&r.value?e.lcZ(4,6,e.xi3(5,8,null==(i=n.formGroup.get("spaces"))||null==i.controls[t]||null==(r=i.controls[t].get("space_type_id"))?null:r.value,"spaces_types")):e.lcZ(6,11,"app.projects.feature.add.tab_spaces.subitem.nav")," ")}}function Gt(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"a",34),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onAddItemToSpaceFormArray())}),e.O4$(),e._UZ(1,"svg",35),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"app.projects.feature.add.tab_spaces.button.add")," "))}function Bt(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"app-projects-ui-space-form",38),e.NdJ("formGroupCreated",function(n){e.CHM(t);const i=e.oxw().index,r=e.oxw(2);return e.KtG(r.onSpaceFormGroupCreated(n,i))})("deleteItem",function(n){e.CHM(t);const i=e.oxw().index,r=e.oxw(2);return e.KtG(r.onDeleteSpaceItem(n,i))}),e.qZA()}if(2&a){const t=e.oxw().index,o=e.oxw(2);e.Q6J("editable",!0)("initialData",o.spacesFormsData[t])}}function Qt(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"app-projects-ui-space-form",38),e.NdJ("formGroupCreated",function(n){e.CHM(t);const i=e.oxw().index,r=e.oxw(2);return e.KtG(r.onSpaceFormGroupCreated(n,i))})("deleteItem",function(n){e.CHM(t);const i=e.oxw().index,r=e.oxw(2);return e.KtG(r.onDeleteSpaceItem(n,i))}),e.qZA()}if(2&a){const t=e.oxw().index,o=e.oxw(2);e.Q6J("editable",!1)("initialData",o.spacesFormsData[t])}}const Ht=function(a,_){return{space:a,i:_}};function Rt(a,_){if(1&a&&e.GkF(0,6),2&a){const t=e.oxw().index,o=e.oxw(2),n=e.MAs(18);e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.WLB(2,Ht,o.formDataToSave.spaces[t],t))}}function zt(a,_){if(1&a&&(e.ynx(0),e.TgZ(1,"c-tab-pane",19),e.YNc(2,Bt,1,2,"app-projects-ui-space-form",36),e.YNc(3,Qt,1,2,"app-projects-ui-space-form",36),e.YNc(4,Rt,1,5,"ng-container",37),e.qZA(),e.BQk()),2&a){const t=_.index,o=e.oxw(2);e.xp6(2),e.Q6J("ngIf","step1"===o.currentStep),e.xp6(1),e.Q6J("ngIf","step2"===o.currentStep),e.xp6(1),e.Q6J("ngIf","step2"===o.currentStep&&!0===o.spacesFormsCreated[t]&&o.formDataToSave&&!0===(null==o.formDataToSave?null:o.formDataToSave.$$__designs_gallery_updated)&&(null==o.formDataToSave?null:o.formDataToSave.spaces[t]))}}function Yt(a,_){if(1&a&&(e.ynx(0),e._UZ(1,"app-projects-ui-project-detail",39),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("project",t.element)}}function Kt(a,_){if(1&a&&(e.ynx(0),e._UZ(1,"app-projects-ui-project-detail",39),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("project",t.formDataToSave)}}function Wt(a,_){if(1&a&&e._UZ(0,"embed",40),2&a){const t=e.oxw(2);e.Q6J("src",t.budgetPdfUrl,e.uOi)}}const Xt=function(){return{"min-height":"calc(100vh - 520px)"}},eo=function(){return{"min-height":"calc(100vh - 420px)"}};function to(a,_){if(1&a&&(e.ynx(0),e.TgZ(1,"techpromux-ui-panel-box",13)(2,"div",14)(3,"c-nav",15),e.YNc(4,kt,4,8,"a",16),e.YNc(5,Lt,4,9,"a",16),e.YNc(6,Ot,4,7,"a",17),e.YNc(7,Pt,4,7,"a",17),e.qZA(),e.TgZ(8,"c-tab-content",null,18)(10,"c-tab-pane",19),e.YNc(11,$t,1,2,"app-projects-ui-general-form",20),e.YNc(12,Vt,1,2,"app-projects-ui-general-form",20),e.qZA(),e.TgZ(13,"c-tab-pane",19)(14,"c-nav",15),e.YNc(15,Ut,7,13,"ng-container",21),e.YNc(16,Gt,4,3,"a",22),e.qZA(),e.TgZ(17,"c-tab-content",null,23),e.YNc(19,zt,5,3,"ng-container",21),e._UZ(20,"c-tab-pane",19),e.qZA()(),e._UZ(21,"c-tab-pane",19)(22,"c-tab-pane",19),e.TgZ(23,"c-tab-pane",19),e.YNc(24,Yt,2,1,"ng-container",4),e.YNc(25,Kt,2,1,"ng-container",4),e.qZA(),e.TgZ(26,"c-tab-pane",19),e.YNc(27,Wt,1,1,"embed",24),e.qZA()()()(),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("customClasses","ms-2 me-2"),e.xp6(2),e.Tol("content-no-printable"),e.xp6(1),e.Q6J("ngIf",t.isVisibleTab_GENERAL_DATA()),e.xp6(1),e.Q6J("ngIf",t.isVisibleTab_SPACES()),e.xp6(1),e.Q6J("ngIf",t.isVisibleTab_DETAILS()),e.xp6(1),e.Q6J("ngIf",t.isVisibleTab_BUDGET()),e.xp6(1),e.Akn(t.hasMobileSize()?e.DdM(19,Xt):e.DdM(20,eo)),e.xp6(3),e.Q6J("ngIf","step1"===t.currentStep),e.xp6(1),e.Q6J("ngIf","step2"===t.currentStep),e.xp6(3),e.Q6J("ngForOf",t.spacesFormsData)("ngForTrackBy",t.spacesFormsDataTrackByFn),e.xp6(1),e.Q6J("ngIf",t.formIsEditable),e.xp6(3),e.Q6J("ngForOf",t.spacesFormsData)("ngForTrackBy",t.spacesFormsDataTrackByFn),e.xp6(5),e.Q6J("ngIf","step1"===t.currentStep&&t.element),e.xp6(1),e.Q6J("ngIf","step2"===t.currentStep&&t.formDataToSave&&!0===(null==t.formDataToSave?null:t.formDataToSave.$$__designs_gallery_updated)),e.xp6(2),e.Q6J("ngIf",null!==t.budgetPdfUrl)}}function oo(a,_){1&a&&(e.ynx(0),e.TgZ(1,"techpromux-ui-panel-box",13)(2,"div",14)(3,"div",41),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.BQk()),2&a&&(e.xp6(1),e.Q6J("customClasses","ms-2 me-2"),e.xp6(3),e.hij(" ",e.lcZ(5,2,"app.projects.feature.add.step3.body.confirmation")," "))}function no(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onClickBtn_Start())}),e.O4$(),e._UZ(1,"svg",46),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.isDisabledBtn_Start()),e.xp6(2),e.hij(" ",e.lcZ(3,2,"base.actions.button.begin")," ")}}function ao(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onClickBtn_Exit())}),e.O4$(),e._UZ(1,"svg",47),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.isDisabledBtn_Exit()),e.xp6(2),e.hij(" ",e.lcZ(3,2,"base.actions.button.toList")," ")}}function io(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onClickBtn_Previous())}),e.O4$(),e._UZ(1,"svg",48),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.isDisabledBtn_Previous()),e.xp6(2),e.hij(" ",e.lcZ(3,2,"base.actions.button.back_edit")," ")}}function so(a,_){1&a&&(e.ynx(0),e.O4$(),e._UZ(1,"svg",50),e._uU(2),e.ALo(3,"translate"),e.BQk()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"base.actions.button.confirm")," "))}function lo(a,_){1&a&&(e.ynx(0),e.O4$(),e._UZ(1,"svg",51),e._uU(2),e.ALo(3,"translate"),e.BQk()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"base.actions.button.confirm_errors")," "))}function ro(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onClickBtn_Next())}),e.YNc(1,so,4,3,"ng-container",4),e.YNc(2,lo,4,3,"ng-container",4),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.isDisabledBtn_Next())("active",!t.isDisabledBtn_Next()&&t.isFormGroupValid())("color",t.isFormGroupValid()?"primary":"danger"),e.xp6(1),e.Q6J("ngIf",t.isFormGroupValid()),e.xp6(1),e.Q6J("ngIf",!t.isFormGroupValid())}}function co(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onClickBtn_End())}),e.O4$(),e._UZ(1,"svg",53),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.isDisabledBtn_End())("active",!t.isDisabledBtn_End()),e.xp6(2),e.hij(" ",e.lcZ(3,3,"base.actions.button.save")," ")}}function _o(a,_){if(1&a&&(e.YNc(0,no,4,4,"button",42),e.YNc(1,ao,4,4,"button",42),e.YNc(2,io,4,4,"button",42),e.YNc(3,ro,3,5,"button",43),e.YNc(4,co,4,5,"button",44)),2&a){const t=e.oxw();e.Q6J("ngIf",t.isVisibleBtn_Start()),e.xp6(1),e.Q6J("ngIf",t.isVisibleBtn_Exit()),e.xp6(1),e.Q6J("ngIf",t.isVisibleBtn_Previous()),e.xp6(1),e.Q6J("ngIf",t.isVisibleBtn_Next()),e.xp6(1),e.Q6J("ngIf",t.isVisibleBtn_End())}}function uo(a,_){if(1&a&&(e.TgZ(0,"c-card",54)(1,"c-card-header")(2,"label")(3,"b"),e._uU(4),e.ALo(5,"translate"),e.ALo(6,"async"),e.ALo(7,"optionItemLabel"),e.qZA()()(),e.TgZ(8,"c-card-body")(9,"div",14)(10,"div",55),e._UZ(11,"techpromux-ui-photos-gallery",56),e.qZA(),e._UZ(12,"div",57),e.TgZ(13,"div",58),e._UZ(14,"techpromux-ui-photos-gallery",56),e.qZA()()()()),2&a){const t=_.space,o=_.i,n=e.oxw();e.xp6(4),e.lnq(" ",e.lcZ(5,27,"app.projects.ui.table.title.space")," # ",o+1," - ",e.lcZ(6,29,e.xi3(7,31,t.space_type_id,"spaces_types"))," "),e.xp6(7),e.Q6J("editable",!1)("header","")("imageStoreBasePath",n.imageStoreBasePath)("photos",t.designs_gallery)("container_class","")("img_width","100%")("img_height","100%")("img_container_width_editable","100%")("img_container_width_no_editable","100%")("img_container_height_editable","")("img_container_height_no_editable","")("img_container_class","text-center position-relative m-auto pt-0 mt-0 mb-3 me-3"),e.xp6(3),e.Q6J("editable",!1)("header","")("imageStoreBasePath",n.imageStoreBasePath)("photos",n.getSpaceWallsDesignsGalleries(t))("container_class","")("img_width","100%")("img_height","100%")("img_container_width_editable","45%")("img_container_width_no_editable","45%")("img_container_height_editable","")("img_container_height_no_editable","")("img_container_class","position-relative float-start text-center m-auto pt-0 mt-0 mb-2 ms-2")}}const Me=function(){return{}};function mo(a,_){1&a&&(e.ynx(0),e.O4$(),e._UZ(1,"svg",10),e._uU(2),e.ALo(3,"translate"),e.BQk()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"app.projects.feature.add.button.step1")," "))}function ho(a,_){1&a&&(e.ynx(0),e.O4$(),e._UZ(1,"svg",11),e._uU(2),e.ALo(3,"translate"),e.BQk()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"app.projects.feature.add.button.step2")," "))}function fo(a,_){1&a&&(e.ynx(0),e.O4$(),e._UZ(1,"svg",12),e._uU(2),e.ALo(3,"translate"),e.BQk()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"app.projects.feature.add.button.step3")," "))}function go(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onActivateProjectTabX(0))}),e.O4$(),e._UZ(1,"svg",26),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){e.oxw();const t=e.MAs(9),o=e.oxw();e.Q6J("cTabContent",t)("tabPaneIdx",0)("disabled",o.isDisabledTab_GENERAL_DATA())("active",0===o.formTabActive)("cTextColor",o.isProjectFormGroupValid()?"":"danger"),e.xp6(2),e.hij(" ",e.lcZ(3,6,"app.projects.feature.add.tab_general.header")," ")}}function bo(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onActivateProjectTabX(1))}),e.O4$(),e._UZ(1,"svg",27),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){e.oxw();const t=e.MAs(9),o=e.oxw();e.Q6J("cTabContent",t)("tabPaneIdx",1)("disabled",o.isDisabledTab_SPACES())("active",1===o.formTabActive)("cTextColor",o.isSpacesFormArrayValid()?"":"danger"),e.xp6(2),e.AsE(" ",e.lcZ(3,7,"app.projects.feature.add.tab_spaces.header")," (",o.spacesFormsData.length,") ")}}function wo(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onActivateProjectTabX(4))}),e.O4$(),e._UZ(1,"svg",29),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){e.oxw();const t=e.MAs(9),o=e.oxw();e.Q6J("cTabContent",t)("tabPaneIdx",4)("disabled",o.isDisabledTab_DETAILS())("active",4===o.formTabActive),e.xp6(2),e.hij(" ",e.lcZ(3,5,"app.projects.feature.add.tab_details.header")," ")}}function vo(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onActivateProjectTabX(5))}),e.O4$(),e._UZ(1,"svg",30),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){e.oxw();const t=e.MAs(9),o=e.oxw();e.Q6J("cTabContent",t)("tabPaneIdx",5)("disabled",o.isDisabledTab_BUDGET())("active",5===o.formTabActive),e.xp6(2),e.hij(" ",e.lcZ(3,5,"app.projects.feature.add.tab_budget.header")," ")}}function xo(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"app-projects-ui-general-form",31),e.NdJ("formGroupCreated",function(n){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onProjectFormGroupCreated(n))}),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("editable",!0)("initialData",t.projectFormData)}}function To(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"app-projects-ui-general-form",31),e.NdJ("formGroupCreated",function(n){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onProjectFormGroupCreated(n))}),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("editable",!1)("initialData",t.projectFormData)}}function yo(a,_){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",32),e.NdJ("click",function(){const i=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.onActivateSpaceTabX(i))}),e.O4$(),e._UZ(2,"svg",33),e._uU(3),e.ALo(4,"async"),e.ALo(5,"optionItemLabel"),e.ALo(6,"translate"),e.qZA(),e.BQk()}if(2&a){const t=_.index;e.oxw();const o=e.MAs(18),n=e.oxw();let i,r;e.xp6(1),e.Q6J("cTabContent",o)("tabPaneIdx",t)("cTextColor",n.isSpaceFormGroupValid(t)?"":"danger")("active",n.spaceTabActive===t),e.xp6(2),e.AsE(" # ",t+1," - ",null!=(i=n.formGroup.get("spaces"))&&null!=i.controls[t]&&null!=(r=i.controls[t].get("space_type_id"))&&r.value?e.lcZ(4,6,e.xi3(5,8,null==(i=n.formGroup.get("spaces"))||null==i.controls[t]||null==(r=i.controls[t].get("space_type_id"))?null:r.value,"spaces_types")):e.lcZ(6,11,"app.projects.feature.add.tab_spaces.subitem.nav")," ")}}function Co(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"a",34),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onAddItemToSpaceFormArray())}),e.O4$(),e._UZ(1,"svg",35),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"app.projects.feature.add.tab_spaces.button.add")," "))}function Ao(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"app-projects-ui-space-form",38),e.NdJ("formGroupCreated",function(n){e.CHM(t);const i=e.oxw().index,r=e.oxw(2);return e.KtG(r.onSpaceFormGroupCreated(n,i))})("deleteItem",function(n){e.CHM(t);const i=e.oxw().index,r=e.oxw(2);return e.KtG(r.onDeleteSpaceItem(n,i))}),e.qZA()}if(2&a){const t=e.oxw().index,o=e.oxw(2);e.Q6J("editable",!0)("initialData",o.spacesFormsData[t])}}function Fo(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"app-projects-ui-space-form",38),e.NdJ("formGroupCreated",function(n){e.CHM(t);const i=e.oxw().index,r=e.oxw(2);return e.KtG(r.onSpaceFormGroupCreated(n,i))})("deleteItem",function(n){e.CHM(t);const i=e.oxw().index,r=e.oxw(2);return e.KtG(r.onDeleteSpaceItem(n,i))}),e.qZA()}if(2&a){const t=e.oxw().index,o=e.oxw(2);e.Q6J("editable",!1)("initialData",o.spacesFormsData[t])}}const So=function(a,_){return{space:a,i:_}};function jo(a,_){if(1&a&&e.GkF(0,6),2&a){const t=e.oxw().index,o=e.oxw(2),n=e.MAs(18);e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.WLB(2,So,o.formDataToSave.spaces[t],t))}}function No(a,_){if(1&a&&(e.ynx(0),e.TgZ(1,"c-tab-pane",19),e.YNc(2,Ao,1,2,"app-projects-ui-space-form",36),e.YNc(3,Fo,1,2,"app-projects-ui-space-form",36),e.YNc(4,jo,1,5,"ng-container",37),e.qZA(),e.BQk()),2&a){const t=_.index,o=e.oxw(2);e.xp6(2),e.Q6J("ngIf","step1"===o.currentStep),e.xp6(1),e.Q6J("ngIf","step2"===o.currentStep),e.xp6(1),e.Q6J("ngIf","step2"===o.currentStep&&!0===o.spacesFormsCreated[t]&&o.formDataToSave&&!0===(null==o.formDataToSave?null:o.formDataToSave.$$__designs_gallery_updated)&&(null==o.formDataToSave?null:o.formDataToSave.spaces[t]))}}function Eo(a,_){if(1&a&&(e.ynx(0),e._UZ(1,"app-projects-ui-project-detail",39),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("project",t.element)}}function Io(a,_){if(1&a&&(e.ynx(0),e._UZ(1,"app-projects-ui-project-detail",39),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("project",t.formDataToSave)}}function Jo(a,_){if(1&a&&e._UZ(0,"embed",40),2&a){const t=e.oxw(2);e.Q6J("src",t.budgetPdfUrl,e.uOi)}}const Zo=function(){return{"min-height":"calc(100vh - 520px)"}},Mo=function(){return{"min-height":"calc(100vh - 420px)"}};function Do(a,_){if(1&a&&(e.ynx(0),e.TgZ(1,"techpromux-ui-panel-box",13)(2,"div",14)(3,"c-nav",15),e.YNc(4,go,4,8,"a",16),e.YNc(5,bo,4,9,"a",16),e.YNc(6,wo,4,7,"a",17),e.YNc(7,vo,4,7,"a",17),e.qZA(),e.TgZ(8,"c-tab-content",null,18)(10,"c-tab-pane",19),e.YNc(11,xo,1,2,"app-projects-ui-general-form",20),e.YNc(12,To,1,2,"app-projects-ui-general-form",20),e.qZA(),e.TgZ(13,"c-tab-pane",19)(14,"c-nav",15),e.YNc(15,yo,7,13,"ng-container",21),e.YNc(16,Co,4,3,"a",22),e.qZA(),e.TgZ(17,"c-tab-content",null,23),e.YNc(19,No,5,3,"ng-container",21),e._UZ(20,"c-tab-pane",19),e.qZA()(),e._UZ(21,"c-tab-pane",19)(22,"c-tab-pane",19),e.TgZ(23,"c-tab-pane",19),e.YNc(24,Eo,2,1,"ng-container",4),e.YNc(25,Io,2,1,"ng-container",4),e.qZA(),e.TgZ(26,"c-tab-pane",19),e.YNc(27,Jo,1,1,"embed",24),e.qZA()()()(),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("customClasses","ms-2 me-2"),e.xp6(2),e.Tol("content-no-printable"),e.xp6(1),e.Q6J("ngIf",t.isVisibleTab_GENERAL_DATA()),e.xp6(1),e.Q6J("ngIf",t.isVisibleTab_SPACES()),e.xp6(1),e.Q6J("ngIf",t.isVisibleTab_DETAILS()),e.xp6(1),e.Q6J("ngIf",t.isVisibleTab_BUDGET()),e.xp6(1),e.Akn(t.hasMobileSize()?e.DdM(19,Zo):e.DdM(20,Mo)),e.xp6(3),e.Q6J("ngIf","step1"===t.currentStep),e.xp6(1),e.Q6J("ngIf","step2"===t.currentStep),e.xp6(3),e.Q6J("ngForOf",t.spacesFormsData)("ngForTrackBy",t.spacesFormsDataTrackByFn),e.xp6(1),e.Q6J("ngIf",t.formIsEditable),e.xp6(3),e.Q6J("ngForOf",t.spacesFormsData)("ngForTrackBy",t.spacesFormsDataTrackByFn),e.xp6(5),e.Q6J("ngIf","step1"===t.currentStep&&t.element),e.xp6(1),e.Q6J("ngIf","step2"===t.currentStep&&t.formDataToSave&&!0===(null==t.formDataToSave?null:t.formDataToSave.$$__designs_gallery_updated)),e.xp6(2),e.Q6J("ngIf",null!==t.budgetPdfUrl)}}function qo(a,_){1&a&&(e.ynx(0),e.TgZ(1,"techpromux-ui-panel-box",13)(2,"div",14)(3,"div",41),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.BQk()),2&a&&(e.xp6(1),e.Q6J("customClasses","ms-2 me-2"),e.xp6(3),e.hij(" ",e.lcZ(5,2,"app.projects.feature.add.step3.body.confirmation")," "))}function ko(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onClickBtn_Start())}),e.O4$(),e._UZ(1,"svg",46),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.isDisabledBtn_Start()),e.xp6(2),e.hij(" ",e.lcZ(3,2,"base.actions.button.begin")," ")}}function Lo(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onClickBtn_Exit())}),e.O4$(),e._UZ(1,"svg",47),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.isDisabledBtn_Exit()),e.xp6(2),e.hij(" ",e.lcZ(3,2,"base.actions.button.toList")," ")}}function Oo(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onClickBtn_Previous())}),e.O4$(),e._UZ(1,"svg",48),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.isDisabledBtn_Previous()),e.xp6(2),e.hij(" ",e.lcZ(3,2,"base.actions.button.back_edit")," ")}}function Po(a,_){1&a&&(e.ynx(0),e.O4$(),e._UZ(1,"svg",50),e._uU(2),e.ALo(3,"translate"),e.BQk()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"base.actions.button.confirm")," "))}function $o(a,_){1&a&&(e.ynx(0),e.O4$(),e._UZ(1,"svg",51),e._uU(2),e.ALo(3,"translate"),e.BQk()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"base.actions.button.confirm_errors")," "))}function Vo(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onClickBtn_Next())}),e.YNc(1,Po,4,3,"ng-container",4),e.YNc(2,$o,4,3,"ng-container",4),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.isDisabledBtn_Next())("active",!t.isDisabledBtn_Next()&&t.isFormGroupValid())("color",t.isFormGroupValid()?"primary":"danger"),e.xp6(1),e.Q6J("ngIf",t.isFormGroupValid()),e.xp6(1),e.Q6J("ngIf",!t.isFormGroupValid())}}function Uo(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onClickBtn_End())}),e.O4$(),e._UZ(1,"svg",53),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.isDisabledBtn_End())("active",!t.isDisabledBtn_End()),e.xp6(2),e.hij(" ",e.lcZ(3,3,"base.actions.button.save")," ")}}function Go(a,_){if(1&a&&(e.YNc(0,ko,4,4,"button",42),e.YNc(1,Lo,4,4,"button",42),e.YNc(2,Oo,4,4,"button",42),e.YNc(3,Vo,3,5,"button",43),e.YNc(4,Uo,4,5,"button",44)),2&a){const t=e.oxw();e.Q6J("ngIf",t.isVisibleBtn_Start()),e.xp6(1),e.Q6J("ngIf",t.isVisibleBtn_Exit()),e.xp6(1),e.Q6J("ngIf",t.isVisibleBtn_Previous()),e.xp6(1),e.Q6J("ngIf",t.isVisibleBtn_Next()),e.xp6(1),e.Q6J("ngIf",t.isVisibleBtn_End())}}function Bo(a,_){if(1&a&&(e.TgZ(0,"c-card",54)(1,"c-card-header")(2,"label")(3,"b"),e._uU(4),e.ALo(5,"translate"),e.ALo(6,"async"),e.ALo(7,"optionItemLabel"),e.qZA()()(),e.TgZ(8,"c-card-body")(9,"div",14)(10,"div",55),e._UZ(11,"techpromux-ui-photos-gallery",56),e.qZA(),e._UZ(12,"div",57),e.TgZ(13,"div",58),e._UZ(14,"techpromux-ui-photos-gallery",56),e.qZA()()()()),2&a){const t=_.space,o=_.i,n=e.oxw();e.xp6(4),e.lnq(" ",e.lcZ(5,27,"app.projects.ui.table.title.space")," # ",o+1," - ",e.lcZ(6,29,e.xi3(7,31,t.space_type_id,"spaces_types"))," "),e.xp6(7),e.Q6J("editable",!1)("header","")("imageStoreBasePath",n.imageStoreBasePath)("photos",t.designs_gallery)("container_class","")("img_width","100%")("img_height","100%")("img_container_width_editable","100%")("img_container_width_no_editable","100%")("img_container_height_editable","")("img_container_height_no_editable","")("img_container_class","text-center position-relative m-auto pt-0 mt-0 mb-3 me-3"),e.xp6(3),e.Q6J("editable",!1)("header","")("imageStoreBasePath",n.imageStoreBasePath)("photos",n.getSpaceWallsDesignsGalleries(t))("container_class","")("img_width","100%")("img_height","100%")("img_container_width_editable","45%")("img_container_width_no_editable","45%")("img_container_height_editable","")("img_container_height_no_editable","")("img_container_class","position-relative float-start text-center m-auto pt-0 mt-0 mb-2 ms-2")}}const De=function(){return{}},Ho=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:de,data:{title:$localize`Listado Obras`,enabled:!0,flowData:{context:"",module:"projects",action:"list",step:""},animation:"ProjectListPage"}},{path:"add/:step",component:(()=>{class a extends ae{constructor(){super(),this.elementIsNew=!0}getProjectInitialData(){if(this.__isDevMode){const t=Math.floor(1e4*Math.random()),o=t<1e3?t+1e3:t>1e4?t-1e3:t;return{id:null,reference:"Reference - "+o,client:{first_name:"First Name "+o,last_name:"Last Name "+o,nif:"X0101011A",company:"Company "+o,cellphone:"600 123 "+o,email:"email"+o+"@local.com"},address:{street:"Street "+o,additional:"5A",country_code:"ES",region_code:"",state_code:"",city_code:"",postal_code:"01001",has_elevator:!1},description:"Some description - "+o+" - "+(new Date).toUTCString()}}return{}}isVisibleTab_SPACES(){return this.__isDevMode}isDisabledTab_SPACES(){return!this.__isDevMode}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["ng-component"]],features:[e.qOj],decls:19,vars:19,consts:[[3,"customClasses","autoJustify"],[1,"col-xl-5","col-lg-5","col-md-5","col-sm-5","col-xs-12","align-middle","mb-2"],[1,"d-none","d-sm-block","col-xs-12","mt-1"],[1,"mb-0"],[4,"ngIf"],[1,"col-xl-7","col-lg-7","col-md-7","col-sm-7","col-xs-12","d-none","d-sm-block","d-sm-flex","justify-content-end","ps-3","pe-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-sm-flex","justify-content-end","ps-3","pe-3"],["actionButtonsTpl",""],["spaceDesignDetailsTpl",""],["cIcon","","name","cil-house","width","16","size","xl"],["cIcon","","name","cil-send","width","16","size","xl"],["cIcon","","name","cil-thumb-up","width","16","size","xl"],[3,"customClasses"],[1,"row"],["variant","tabs"],["cNavLink","",3,"cTabContent","tabPaneIdx","disabled","active","cTextColor","click",4,"ngIf"],["cNavLink","",3,"cTabContent","tabPaneIdx","disabled","active","click",4,"ngIf"],["tabContent","cTabContent"],[1,"p-0","pt-3"],[3,"editable","initialData","formGroupCreated",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["cNavLink","",3,"click",4,"ngIf"],["tabContentSpace","cTabContent"],["name","budgetPdfUrl","class","pdf-content","title","Project Budget PDF",3,"src",4,"ngIf"],["cNavLink","",3,"cTabContent","tabPaneIdx","disabled","active","cTextColor","click"],["cIcon","","name","cil-address-book","width","16"],["cIcon","","name","cil-house","width","16"],["cNavLink","",3,"cTabContent","tabPaneIdx","disabled","active","click"],["cIcon","","name","cil-folder","width","16"],["cIcon","","name","cil-description","width","16"],[3,"editable","initialData","formGroupCreated"],["cNavLink","",3,"cTabContent","tabPaneIdx","cTextColor","active","click"],["cIcon","","name","cil-view-quilt","width","16"],["cNavLink","",3,"click"],["cIcon","","name","cil-medical-cross","width","16"],[3,"editable","initialData","formGroupCreated","deleteItem",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"editable","initialData","formGroupCreated","deleteItem"],[3,"project"],["name","budgetPdfUrl","title","Project Budget PDF",1,"pdf-content",3,"src"],[1,"col-xs-12","pt-4","pb-4","ps-4","pe-4"],["cButton","","color","secondary","variant","outline","class","ms-1 me-1 w-xs-100","style","min-width: 100px",3,"disabled","click",4,"ngIf"],["cButton","","variant","outline","class","ms-1 me-1 w-xs-100","style","min-width: 100px",3,"disabled","active","color","click",4,"ngIf"],["cButton","","color","primary","variant","outline","class","ms-1 me-1 w-xs-100","style","min-width: 100px",3,"disabled","active","click",4,"ngIf"],["cButton","","color","secondary","variant","outline",1,"ms-1","me-1","w-xs-100",2,"min-width","100px",3,"disabled","click"],["cIcon","","name","cib-addthis","width","16"],["cIcon","","name","cil-list","width","16"],["cIcon","","name","cil-arrow-thick-left","width","16"],["cButton","","variant","outline",1,"ms-1","me-1","w-xs-100",2,"min-width","100px",3,"disabled","active","color","click"],["cIcon","","name","cil-calendar-check","width","16"],["cIcon","","name","cil-bug","width","16"],["cButton","","color","primary","variant","outline",1,"ms-1","me-1","w-xs-100",2,"min-width","100px",3,"disabled","active","click"],["cIcon","","name","cil-save","width","16"],[1,"mb-3",2,"max-width","calc(100vw - 80px)"],[1,"col-xl-6","col-lg-6","col-md-6","col-sm-12","col-xs-12","ps-3","pe-3",2,"max-width","calc(100vw - 60px)"],[3,"editable","header","imageStoreBasePath","photos","container_class","img_width","img_height","img_container_width_editable","img_container_width_no_editable","img_container_height_editable","img_container_height_no_editable","img_container_class"],[1,"col-xs-12","d-xs-block","d-sm-block","d-md-none"],[1,"col-xl-6","col-lg-6","col-md-6","col-sm-12","col-xs-12",2,"max-width","calc(100vw - 60px)"]],template:function(o,n){if(1&o&&(e.TgZ(0,"techpromux-ui-page-box")(1,"techpromux-ui-navbar-box",0)(2,"div",1),e._UZ(3,"div",2),e.TgZ(4,"h5",3),e.YNc(5,Mt,4,3,"ng-container",4),e.YNc(6,Dt,4,3,"ng-container",4),e.YNc(7,qt,4,3,"ng-container",4),e.qZA()(),e.TgZ(8,"div",5),e.GkF(9,6),e.qZA()(),e.YNc(10,to,28,21,"ng-container",4),e.YNc(11,oo,6,4,"ng-container",4),e.TgZ(12,"techpromux-ui-navbar-box",0)(13,"div",7),e.GkF(14,6),e.qZA()()(),e.YNc(15,_o,5,5,"ng-template",null,8,e.W1O),e.YNc(17,uo,15,34,"ng-template",null,9,e.W1O)),2&o){const i=e.MAs(16);e.xp6(1),e.Tol("content-no-printable"),e.Q6J("customClasses","justify-content-between row")("autoJustify",!1),e.xp6(4),e.Q6J("ngIf","step1"===n.currentStep),e.xp6(1),e.Q6J("ngIf","step2"===n.currentStep),e.xp6(1),e.Q6J("ngIf","step3"===n.currentStep),e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(17,Me)),e.xp6(1),e.Q6J("ngIf",n.formIsVisible),e.xp6(1),e.Q6J("ngIf","step3"===n.currentStep),e.xp6(1),e.Tol("content-no-printable"),e.Q6J("customClasses","justify-content-between row")("autoJustify",!1),e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(18,Me))}},dependencies:[O.sg,O.O5,O.tP,Z.Hq3,Z.AkF,Z.yue,Z.nkx,ne.ar,Z.C$2,Z.Eug,Z.hL0,Z.rZi,Z.Vh3,Z.g8e,X.hQ,X.Ys,X.Rj,k.ef,he,Je,Ze,O.Ov,te.X$,k.wO],styles:["@media (max-width: 575.98px){.w-xs-100[_ngcontent-%COMP%]{width:calc(100% - 8px);margin-bottom:10px}}.pdf-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;min-height:600px}"],changeDetection:0})}return a})(),data:{title:$localize`Añadir Obra`,enabled:!0,flowData:{context:"",module:"projects",action:"add",step:"step1",steps:["step1","step2","step3"]},animation:"ProjectAddPage"}},{path:"edit/:step",component:(()=>{class a extends ae{constructor(){super(),this.elementIsNew=!1}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["ng-component"]],features:[e.qOj],decls:19,vars:19,consts:[[3,"customClasses","autoJustify"],[1,"col-xl-5","col-lg-5","col-md-5","col-sm-5","col-xs-12","align-middle","mb-2"],[1,"d-none","d-sm-block","col-xs-12","mt-1"],[1,"mb-0"],[4,"ngIf"],[1,"col-xl-7","col-lg-7","col-md-7","col-sm-7","col-xs-12","d-none","d-sm-block","d-sm-flex","justify-content-end","ps-3","pe-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-sm-flex","justify-content-end","ps-3","pe-3"],["actionButtonsTpl",""],["spaceDesignDetailsTpl",""],["cIcon","","name","cil-house","width","16","size","xl"],["cIcon","","name","cil-send","width","16","size","xl"],["cIcon","","name","cil-thumb-up","width","16","size","xl"],[3,"customClasses"],[1,"row"],["variant","tabs"],["cNavLink","",3,"cTabContent","tabPaneIdx","disabled","active","cTextColor","click",4,"ngIf"],["cNavLink","",3,"cTabContent","tabPaneIdx","disabled","active","click",4,"ngIf"],["tabContent","cTabContent"],[1,"p-0","pt-3"],[3,"editable","initialData","formGroupCreated",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["cNavLink","",3,"click",4,"ngIf"],["tabContentSpace","cTabContent"],["name","budgetPdfUrl","class","pdf-content","title","Project Budget PDF",3,"src",4,"ngIf"],["cNavLink","",3,"cTabContent","tabPaneIdx","disabled","active","cTextColor","click"],["cIcon","","name","cil-address-book","width","16"],["cIcon","","name","cil-house","width","16"],["cNavLink","",3,"cTabContent","tabPaneIdx","disabled","active","click"],["cIcon","","name","cil-folder","width","16"],["cIcon","","name","cil-description","width","16"],[3,"editable","initialData","formGroupCreated"],["cNavLink","",3,"cTabContent","tabPaneIdx","cTextColor","active","click"],["cIcon","","name","cil-view-quilt","width","16"],["cNavLink","",3,"click"],["cIcon","","name","cil-medical-cross","width","16"],[3,"editable","initialData","formGroupCreated","deleteItem",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"editable","initialData","formGroupCreated","deleteItem"],[3,"project"],["name","budgetPdfUrl","title","Project Budget PDF",1,"pdf-content",3,"src"],[1,"col-xs-12","pt-4","pb-4","ps-4","pe-4"],["cButton","","color","secondary","variant","outline","class","ms-1 me-1 w-xs-100","style","min-width: 100px",3,"disabled","click",4,"ngIf"],["cButton","","variant","outline","class","ms-1 me-1 w-xs-100","style","min-width: 100px",3,"disabled","active","color","click",4,"ngIf"],["cButton","","color","primary","variant","outline","class","ms-1 me-1 w-xs-100","style","min-width: 100px",3,"disabled","active","click",4,"ngIf"],["cButton","","color","secondary","variant","outline",1,"ms-1","me-1","w-xs-100",2,"min-width","100px",3,"disabled","click"],["cIcon","","name","cib-addthis","width","16"],["cIcon","","name","cil-list","width","16"],["cIcon","","name","cil-arrow-thick-left","width","16"],["cButton","","variant","outline",1,"ms-1","me-1","w-xs-100",2,"min-width","100px",3,"disabled","active","color","click"],["cIcon","","name","cil-calendar-check","width","16"],["cIcon","","name","cil-bug","width","16"],["cButton","","color","primary","variant","outline",1,"ms-1","me-1","w-xs-100",2,"min-width","100px",3,"disabled","active","click"],["cIcon","","name","cil-save","width","16"],[1,"mb-3",2,"max-width","calc(100vw - 80px)"],[1,"col-xl-6","col-lg-6","col-md-6","col-sm-12","col-xs-12","ps-3","pe-3",2,"max-width","calc(100vw - 60px)"],[3,"editable","header","imageStoreBasePath","photos","container_class","img_width","img_height","img_container_width_editable","img_container_width_no_editable","img_container_height_editable","img_container_height_no_editable","img_container_class"],[1,"col-xs-12","d-xs-block","d-sm-block","d-md-none"],[1,"col-xl-6","col-lg-6","col-md-6","col-sm-12","col-xs-12",2,"max-width","calc(100vw - 60px)"]],template:function(o,n){if(1&o&&(e.TgZ(0,"techpromux-ui-page-box")(1,"techpromux-ui-navbar-box",0)(2,"div",1),e._UZ(3,"div",2),e.TgZ(4,"h5",3),e.YNc(5,mo,4,3,"ng-container",4),e.YNc(6,ho,4,3,"ng-container",4),e.YNc(7,fo,4,3,"ng-container",4),e.qZA()(),e.TgZ(8,"div",5),e.GkF(9,6),e.qZA()(),e.YNc(10,Do,28,21,"ng-container",4),e.YNc(11,qo,6,4,"ng-container",4),e.TgZ(12,"techpromux-ui-navbar-box",0)(13,"div",7),e.GkF(14,6),e.qZA()()(),e.YNc(15,Go,5,5,"ng-template",null,8,e.W1O),e.YNc(17,Bo,15,34,"ng-template",null,9,e.W1O)),2&o){const i=e.MAs(16);e.xp6(1),e.Tol("content-no-printable"),e.Q6J("customClasses","justify-content-between row")("autoJustify",!1),e.xp6(4),e.Q6J("ngIf","step1"===n.currentStep),e.xp6(1),e.Q6J("ngIf","step2"===n.currentStep),e.xp6(1),e.Q6J("ngIf","step3"===n.currentStep),e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(17,De)),e.xp6(1),e.Q6J("ngIf",n.formIsVisible),e.xp6(1),e.Q6J("ngIf","step3"===n.currentStep),e.xp6(1),e.Tol("content-no-printable"),e.Q6J("customClasses","justify-content-between row")("autoJustify",!1),e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.DdM(18,De))}},dependencies:[O.sg,O.O5,O.tP,Z.Hq3,Z.AkF,Z.yue,Z.nkx,ne.ar,Z.C$2,Z.Eug,Z.hL0,Z.rZi,Z.Vh3,Z.g8e,X.hQ,X.Ys,X.Rj,k.ef,he,Je,Ze,O.Ov,te.X$,k.wO],styles:["@media (max-width: 575.98px){.w-xs-100[_ngcontent-%COMP%]{width:calc(100% - 8px);margin-bottom:10px}}.pdf-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;min-height:600px}"],changeDetection:0})}return a})(),data:{title:$localize`Editar Obra`,enabled:!0,flowData:{context:"",module:"projects",action:"edit",step:"step1",steps:["step1","step2","step3"]},animation:"ProjectEditPage"}}];let Ro=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=e.oAB({type:a});static#o=this.\u0275inj=e.cJS({imports:[be.Bz.forChild(Ho),Ge,be.Bz]})}return a})()}}]);